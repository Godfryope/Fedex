!function(b,a){"object"==typeof exports&&"object"==typeof module?module.exports=a():"function"==typeof define&&define.amd?define("zoid",[],a):"object"==typeof exports?exports.zoid=a():b.zoid=a()}("undefined"!=typeof self?self:this,function(){return function(b){var c={};function a(d){if(c[d])return c[d].exports;var e=c[d]={i:d,l:!1,exports:{}};return b[d].call(e.exports,e,e.exports,a),e.l=!0,e.exports}return a.m=b,a.c=c,a.d=function(b,c,d){a.o(b,c)||Object.defineProperty(b,c,{enumerable:!0,get:d})},a.r=function(a){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},a.t=function(b,c){if(1&c&&(b=a(b)),8&c||4&c&&"object"==typeof b&&b&&b.__esModule)return b;var d=Object.create(null);if(a.r(d),Object.defineProperty(d,"default",{enumerable:!0,value:b}),2&c&&"string"!=typeof b)for(var e in b)a.d(d,e,(function(a){return b[a]}).bind(null,e));return d},a.n=function(c){var b=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(b,"a",b),b},a.o=function(a,b){return({}).hasOwnProperty.call(a,b)},a.p="",a(a.s=0)}([function(u,c,d){"use strict";function v(a,b){return(v=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a})(a,b)}function w(a,b){a.prototype=Object.create(b.prototype),a.prototype.constructor=a,v(a,b)}function x(){return(x=Object.assign||function(d){for(var a=1;a<arguments.length;a++){var b=arguments[a];for(var c in b)({}).hasOwnProperty.call(b,c)&&(d[c]=b[c])}return d}).apply(this,arguments)}function y(a){try{if(!a)return!1;if("undefined"!=typeof Promise&&a instanceof Promise)return!0;if("undefined"!=typeof window&&"function"==typeof window.Window&&a instanceof window.Window||"undefined"!=typeof window&&"function"==typeof window.constructor&&a instanceof window.constructor)return!1;var c={}.toString;if(c){var b=c.call(a);if("[object Window]"===b||"[object global]"===b||"[object DOMWindow]"===b)return!1}if("function"==typeof a.then)return!0}catch(d){}return!1}d.r(c),d.d(c,"PopupOpenError",function(){return aQ}),d.d(c,"create",function(){return cH}),d.d(c,"destroy",function(){return cJ}),d.d(c,"destroyComponents",function(){return t}),d.d(c,"destroyAll",function(){return cI}),d.d(c,"PROP_TYPE",function(){return cn}),d.d(c,"PROP_SERIALIZATION",function(){return co}),d.d(c,"CONTEXT",function(){return cp}),d.d(c,"EVENT",function(){return cq});var z,A=[],B=[],C=0;function D(){if(!C&&z){var a=z;z=null,a.resolve()}}function E(){C+=1}function F(){C-=1,D()}var h=function(){function a(a){var h=this;if(this.resolved=void 0,this.rejected=void 0,this.errorHandled=void 0,this.value=void 0,this.error=void 0,this.handlers=void 0,this.dispatching=void 0,this.stack=void 0,this.resolved=!1,this.rejected=!1,this.errorHandled=!1,this.handlers=[],a){var b,c,d=!1,e=!1,f=!1;E();try{a(function(a){f?h.resolve(a):(d=!0,b=a)},function(a){f?h.reject(a):(e=!0,c=a)})}catch(g){return F(),void this.reject(g)}F(),f=!0,d?this.resolve(b):e&&this.reject(c)}}var b=a.prototype;return b.resolve=function(a){if(this.resolved||this.rejected)return this;if(y(a))throw new Error("Can not resolve promise with another promise");return this.resolved=!0,this.value=a,this.dispatch(),this},b.reject=function(a){var c=this;if(this.resolved||this.rejected)return this;if(y(a))throw new Error("Can not reject promise with another promise");if(!a){var b=a&&"function"==typeof a.toString?a.toString():({}).toString.call(a);a=new Error("Expected reject to be called with Error, got "+b)}return this.rejected=!0,this.error=a,this.errorHandled||setTimeout(function(){c.errorHandled||function(a,c){if(-1===A.indexOf(a)){A.push(a),setTimeout(function(){throw a},1);for(var b=0;b<B.length;b++)B[b](a,c)}}(a,c)},1),this.dispatch(),this},b.asyncReject=function(a){return this.errorHandled=!0,this.reject(a),this},b.dispatch=function(){var h=this.resolved,i=this.rejected,e=this.handlers;if(!this.dispatching&&(h||i)){this.dispatching=!0,E();for(var l=function(a,b){return a.then(function(a){b.resolve(a)},function(a){b.reject(a)})},f=0;f<e.length;f++){var g=e[f],j=g.onSuccess,k=g.onError,c=g.promise,b=void 0;if(h)try{b=j?j(this.value):this.value}catch(m){c.reject(m);continue}else if(i){if(!k){c.reject(this.error);continue}try{b=k(this.error)}catch(n){c.reject(n);continue}}if(b instanceof a&&(b.resolved||b.rejected)){var d=b;d.resolved?c.resolve(d.value):c.reject(d.error),d.errorHandled=!0}else y(b)?b instanceof a&&(b.resolved||b.rejected)?b.resolved?c.resolve(b.value):c.reject(b.error):l(b,c):c.resolve(b)}e.length=0,this.dispatching=!1,F()}},b.then=function(b,c){if(b&&"function"!=typeof b&&!b.call)throw new Error("Promise.then expected a function for success handler");if(c&&"function"!=typeof c&&!c.call)throw new Error("Promise.then expected a function for error handler");var d=new a;return this.handlers.push({promise:d,onSuccess:b,onError:c}),this.errorHandled=!0,this.dispatch(),d},b.catch=function(a){return this.then(void 0,a)},b.finally=function(b){if(b&&"function"!=typeof b&&!b.call)throw new Error("Promise.finally expected a function");return this.then(function(c){return a.try(b).then(function(){return c})},function(c){return a.try(b).then(function(){throw c})})},b.timeout=function(a,b){var c=this;if(this.resolved||this.rejected)return this;var d=setTimeout(function(){c.resolved||c.rejected||c.reject(b||new Error("Promise timed out after "+a+"ms"))},a);return this.then(function(a){return clearTimeout(d),a})},b.toPromise=function(){if("undefined"==typeof Promise)throw new TypeError("Could not find Promise");return Promise.resolve(this)},b.lazy=function(){return this.errorHandled=!0,this},a.resolve=function(b){return b instanceof a?b:y(b)?new a(function(a,c){return b.then(a,c)}):(new a).resolve(b)},a.reject=function(b){return(new a).reject(b)},a.asyncReject=function(b){return(new a).asyncReject(b)},a.all=function(g){var d=new a,e=g.length,f=[];if(!e)return d.resolve(f),d;for(var h=function(b,a,c){return a.then(function(a){f[b]=a,0==(e-=1)&&d.resolve(f)},function(a){c.reject(a)})},b=0;b<g.length;b++){var c=g[b];if(c instanceof a){if(c.resolved){f[b]=c.value,e-=1;continue}}else if(!y(c)){f[b]=c,e-=1;continue}h(b,a.resolve(c),d)}return 0===e&&d.resolve(f),d},a.hash=function(b){var f={},c=[],d=function(a){if(b.hasOwnProperty(a)){var d=b[a];y(d)?c.push(d.then(function(b){f[a]=b})):f[a]=d}};for(var e in b)d(e);return a.all(c).then(function(){return f})},a.map=function(b,c){return a.all(b.map(c))},a.onPossiblyUnhandledException=function(b){var a;return a=b,B.push(a),{cancel:function(){B.splice(B.indexOf(a),1)}}},a.try=function(b,d,e){var c;if(b&&"function"!=typeof b&&!b.call)throw new Error("Promise.try expected a function");E();try{c=b.apply(d,e||[])}catch(f){return F(),a.reject(f)}return F(),a.resolve(c)},a.delay=function(b){return new a(function(a){setTimeout(a,b)})},a.isPromise=function(b){return!!(b&&b instanceof a)||y(b)},a.flush=function(){var b;return b=z=z||new a,D(),b},a}();function G(a){return"[object RegExp]"===({}).toString.call(a)}var H="Call was rejected by callee.\r\n";function I(a){return void 0===a&&(a=window),a.location.protocol}function J(a){if(void 0===a&&(a=window),a.mockDomain){var b=a.mockDomain.split("//")[0];if(b)return b}return I(a)}function K(a){return void 0===a&&(a=window),"about:"===J(a)}function L(a){if(void 0===a&&(a=window),a)try{if(a.parent&&a.parent!==a)return a.parent}catch(b){}}function M(a){if(void 0===a&&(a=window),a&&!L(a))try{return a.opener}catch(b){}}function _(a){try{return!0}catch(b){}return!1}function N(a){void 0===a&&(a=window);var c=a.location;if(!c)throw new Error("Can not read window location");var b=I(a);if(!b)throw new Error("Can not read window protocol");if("file:"===b)return"file://";if("about:"===b){var d=L(a);return d&&_()?N(d):"about://"}var e=c.host;if(!e)throw new Error("Can not read window host");return b+"//"+e}function O(a){void 0===a&&(a=window);var b=N(a);return b&&a.mockDomain&&0===a.mockDomain.indexOf("mock:")?a.mockDomain:b}function P(a){if(!function(a){try{if(a===window)return!0}catch(d){}try{var b,c=Object.getOwnPropertyDescriptor(a,"location");if(c&& !1===c.enumerable)return!1}catch(e){}try{if(K(a)&&_())return!0}catch(f){}try{if(b=a,void 0===b&&(b=window),"mock:"===J(b)&&_())return!0}catch(g){}try{if(N(a)===N(window))return!0}catch(h){}return!1}(a))return!1;try{if(a===window||K(a)&&_()||O(window)===O(a))return!0}catch(b){}return!1}function Q(a){if(!P(a))throw new Error("Expected window to be same domain");return a}function R(a,b){if(!a||!b)return!1;var c=L(b);return c?c===a:-1!==(function(a){var b=[];try{for(;a.parent!==a;)b.push(a.parent),a=a.parent}catch(c){}return b})(b).indexOf(a)}function S(g){var a,c,b=[];try{a=g.frames}catch(i){a=g}try{c=a.length}catch(j){}if(0===c)return b;if(c){for(var d=0;d<c;d++){var h=void 0;try{h=a[d]}catch(k){continue}b.push(h)}return b}for(var e=0;e<100;e++){var f=void 0;try{f=a[e]}catch(l){break}if(!f)break;b.push(f)}return b}function T(g){for(var a=[],b=0,d=S(g);b<d.length;b++){var e=d[b];a.push(e);for(var c=0,f=T(e);c<f.length;c++)a.push(f[c])}return a}function U(a){void 0===a&&(a=window);try{if(a.top)return a.top}catch(e){}if(L(a)===a)return a;try{if(R(window,a)&&window.top)return window.top}catch(f){}try{if(R(a,window)&&window.top)return window.top}catch(g){}for(var c=0,d=T(a);c<d.length;c++){var b=d[c];try{if(b.top)return b.top}catch(h){}if(L(b)===b)return b}}function V(a){var c=U(a);if(!c)throw new Error("Can not determine top window");var b=[].concat(T(c),[c]);return -1===b.indexOf(a)&&(b=[].concat(b,[a],T(a))),b}var W=[],X=[];function Y(a,b){void 0===b&&(b=!0);try{if(a===window)return!1}catch(f){return!0}try{if(!a)return!0}catch(g){return!0}try{if(a.closed)return!0}catch(c){return!c||c.message!==H}if(b&&P(a))try{if(a.mockclosed)return!0}catch(h){}try{if(!a.parent||!a.top)return!0}catch(i){}var d=function(b,c){for(var a=0;a<b.length;a++)try{if(b[a]===c)return a}catch(d){}return -1}(W,a);if(-1!==d){var e=X[d];if(e&&function(b){if(!b.contentWindow||!b.parentNode)return!0;var c=b.ownerDocument;if(c&&c.documentElement&&!c.documentElement.contains(b)){for(var a=b;a.parentNode&&a.parentNode!==a;)a=a.parentNode;if(!a.host||!c.documentElement.contains(a.host))return!0}return!1}(e))return!0}return!1}function Z(a){return(a=a||window).navigator.mockUserAgent||a.navigator.userAgent}function aa(a,b){for(var c=S(a),e=0;e<c.length;e++){var d=c[e];try{if(P(d)&&d.name===b&& -1!==c.indexOf(d))return d}catch(f){}}try{if(-1!==c.indexOf(a.frames[b]))return a.frames[b]}catch(g){}try{if(-1!==c.indexOf(a[b]))return a[b]}catch(h){}}function ab(a,b){return a===M(b)}function ac(a){return void 0===a&&(a=window),M(a=a||window)||L(a)||void 0}function ad(c,d){for(var a=0;a<c.length;a++)for(var e=c[a],b=0;b<d.length;b++)if(e===d[b])return!0;return!1}function ae(a,b){var c=U(a)||a,d=U(b)||b;try{if(c&&d)return c===d}catch(i){}var e=V(a),f=V(b);if(ad(e,f))return!0;var g=M(c),h=M(d);return g&&ad(V(g),f)||h&&ad(V(h),e),!1}function af(b,a){if("string"==typeof b){if("string"==typeof a)return"*"===b||a===b;if(G(a)||Array.isArray(a))return!1}return G(b)?G(a)?b.toString()===a.toString():!Array.isArray(a)&&Boolean(a.match(b)):!!Array.isArray(b)&&(Array.isArray(a)?JSON.stringify(b)===JSON.stringify(a):!G(a)&&b.some(function(b){return af(b,a)}))}function ag(a){return a.match(/^(https?|mock|file):\/\//)?a.split("/").slice(0,3).join("/"):O()}function ah(a){try{if(a===window)return!0}catch(b){if(b&&b.message===H)return!0}try{if("[object Window]"===({}).toString.call(a))return!0}catch(c){if(c&&c.message===H)return!0}try{if(window.Window&&a instanceof window.Window)return!0}catch(d){if(d&&d.message===H)return!0}try{if(a&&a.self===a)return!0}catch(e){if(e&&e.message===H)return!0}try{if(a&&a.parent===a)return!0}catch(f){if(f&&f.message===H)return!0}try{if(a&&a.top===a)return!0}catch(g){if(g&&g.message===H)return!0}try{if(a&&"__unlikely_value__"===a.__cross_domain_utils_window_check__)return!1}catch(h){return!0}try{if("postMessage"in a&&"self"in a&&"location"in a)return!0}catch(i){}return!1}function ai(b){if(P(b))return Q(b).frameElement;for(var c=0,d=document.querySelectorAll("iframe");c<d.length;c++){var a=d[c];if(a&&a.contentWindow&&a.contentWindow===b)return a}}function aj(b){var c;if(void 0===(c=b)&&(c=window),Boolean(L(c))){var a=ai(b);if(a&&a.parentElement)return void a.parentElement.removeChild(a)}try{b.close()}catch(d){}}function ak(b,c){for(var a=0;a<b.length;a++)try{if(b[a]===c)return a}catch(d){}return -1}var al,am=function(){function b(){if(this.name=void 0,this.weakmap=void 0,this.keys=void 0,this.values=void 0,this.name="__weakmap_"+(1e9*Math.random()>>>0)+"__",function(){if("undefined"==typeof WeakMap|| void 0===Object.freeze)return!1;try{var b=new WeakMap,a={};return Object.freeze(a),b.set(a,"__testvalue__"),"__testvalue__"===b.get(a)}catch(c){return!1}}())try{this.weakmap=new WeakMap}catch(a){}this.keys=[],this.values=[]}var a=b.prototype;return a._cleanupClosedWindows=function(){for(var d=this.weakmap,b=this.keys,a=0;a<b.length;a++){var c=b[a];if(ah(c)&&Y(c)){if(d)try{d.delete(c)}catch(e){}b.splice(a,1),this.values.splice(a,1),a-=1}}},a.isSafeToReadWrite=function(a){return!ah(a)},a.set=function(a,b){if(!a)throw new Error("WeakMap expected key");var d=this.weakmap;if(d)try{d.set(a,b)}catch(i){delete this.weakmap}if(this.isSafeToReadWrite(a))try{var e=this.name,c=a[e];return void(c&&c[0]===a?c[1]=b:Object.defineProperty(a,e,{value:[a,b],writable:!0}))}catch(j){}this._cleanupClosedWindows();var f=this.keys,g=this.values,h=ak(f,a);-1===h?(f.push(a),g.push(b)):g[h]=b},a.get=function(a){if(!a)throw new Error("WeakMap expected key");var b=this.weakmap;if(b)try{if(b.has(a))return b.get(a)}catch(e){delete this.weakmap}if(this.isSafeToReadWrite(a))try{var c=a[this.name];return c&&c[0]===a?c[1]:void 0}catch(f){}this._cleanupClosedWindows();var d=ak(this.keys,a);if(-1!==d)return this.values[d]},a.delete=function(a){if(!a)throw new Error("WeakMap expected key");var d=this.weakmap;if(d)try{d.delete(a)}catch(f){delete this.weakmap}if(this.isSafeToReadWrite(a))try{var b=a[this.name];b&&b[0]===a&&(b[0]=b[1]=void 0)}catch(g){}this._cleanupClosedWindows();var e=this.keys,c=ak(e,a);-1!==c&&(e.splice(c,1),this.values.splice(c,1))},a.has=function(a){if(!a)throw new Error("WeakMap expected key");var b=this.weakmap;if(b)try{if(b.has(a))return!0}catch(d){delete this.weakmap}if(this.isSafeToReadWrite(a))try{var c=a[this.name];return!(!c||c[0]!==a)}catch(e){}return this._cleanupClosedWindows(),-1!==ak(this.keys,a)},a.getOrSet=function(a,c){if(this.has(a))return this.get(a);var b=c();return this.set(a,b),b},b}();function an(a){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function $(a,b,c){return($=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(a){return!1}}()?function(d,e,b){var a=[null];a.push.apply(a,e);var c=new(Function.bind.apply(d,a));return b&&v(c,b.prototype),c}:Reflect.construct).apply(null,arguments)}function i(a){var b="function"==typeof Map?new Map:void 0;return(i=function(a){if(null===a|| -1===Function.toString.call(a).indexOf("[native code]"))return a;if("function"!=typeof a)throw new TypeError("Super expression must either be null or a function");if(void 0!==b){if(b.has(a))return b.get(a);b.set(a,c)}function c(){return $(a,arguments,an(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),v(c,a)})(a)}function ao(a){var b=!1;try{(a instanceof window.Element||null!==a&&"object"==typeof a&&1===a.nodeType&&"object"==typeof a.style&&"object"==typeof a.ownerDocument)&&(b=!0)}catch(c){}return b}function ap(a){return a.name||a.__name__||a.displayName||"anonymous"}function aq(a,b){try{delete a.name,a.name=b}catch(c){}return a.__name__=a.displayName=b,a}function ar(a){if("function"==typeof btoa)return btoa(encodeURIComponent(a).replace(/%([0-9A-F]{2})/g,function(b,a){return String.fromCharCode(parseInt(a,16))})).replace(/[=]/g,"");if("undefined"!=typeof Buffer)return Buffer.from(a,"utf8").toString("base64").replace(/[=]/g,"");throw new Error("Can not find window.btoa or Buffer")}function j(){var a="0123456789abcdef";return"uid_"+"xxxxxxxxxx".replace(/./g,function(){return a.charAt(Math.floor(Math.random()*a.length))})+"_"+ar((new Date).toISOString().slice(11,19).replace("T",".")).replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function as(a){try{return JSON.stringify([].slice.call(a),function(b,a){return"function"==typeof a?"memoize["+function(a){if(al=al||new am,null==a||"object"!=typeof a&&"function"!=typeof a)throw new Error("Invalid object");var b=al.get(a);return b||(b=typeof a+":"+j(),al.set(a,b)),b}(a)+"]":ao(a)?{}:a})}catch(b){throw new Error("Arguments not serializable -- can not be used to memoize")}}function at(){return{}}var au=0,av=0;function e(d,a){void 0===a&&(a={});var e,f,b=a.thisNamespace,g=void 0!==b&&b,h=a.time,i=au;au+=1;var c=function(){for(var b,c,k=arguments.length,l=new Array(k),j=0;j<k;j++)l[j]=arguments[j];i<av&&(e=null,f=null,i=au,au+=1),b=g?(f=f||new am).getOrSet(this,at):e=e||{};try{c=as(l)}catch(o){return d.apply(this,arguments)}var a=b[c];if(a&&h&&Date.now()-a.time<h&&(delete b[c],a=null),a)return a.value;var n=Date.now(),m=d.apply(this,arguments);return b[c]={time:n,value:m},m};return c.reset=function(){e=null,f=null},aq(c,(a.name||ap(d))+"::memoized")}function aw(){}function ax(a){var b=!1;return aq(function(){if(!b)return b=!0,a.apply(this,arguments)},ap(a)+"::once")}function ay(a,d){if(void 0===d&&(d=1),d>=3)return"stringifyError stack overflow";try{if(!a)return"<unknown error: "+({}).toString.call(a)+">";if("string"==typeof a)return a;if(a instanceof Error){var b=a&&a.stack,c=a&&a.message;if(b&&c)return -1!==b.indexOf(c)?b:c+"\n"+b;if(b)return b;if(c)return c}return a&&a.toString&&"function"==typeof a.toString?a.toString():({}).toString.call(a)}catch(e){return"Error while stringifying error: "+ay(e,d+1)}}function az(a){return"string"==typeof a?a:a&&a.toString&&"function"==typeof a.toString?a.toString():({}).toString.call(a)}function aA(b,a){if(!a)return b;if(Object.assign)return Object.assign(b,a);for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b}function aB(a){return a}function aC(a,b){var c;return function d(){c=setTimeout(function(){a(),d()},b)}(),{cancel:function(){clearTimeout(c)}}}function aD(a){return[].slice.call(a)}function aE(a){return"[object RegExp]"===({}).toString.call(a)}function aF(a,b,d){if(a.hasOwnProperty(b))return a[b];var c=d();return a[b]=c,c}function g(b){var c,d=[],e=!1,a={set:function(d,c){return e||(b[d]=c,a.register(function(){delete b[d]})),c},register:function(a){var b=ax(function(){return a(c)});return e?a(c):d.push(b),{cancel:function(){var a=d.indexOf(b);-1!==a&&d.splice(a,1)}}},all:function(b){c=b;var a=[];for(e=!0;d.length;){var f=d.shift();a.push(f())}return h.all(a).then(aw)}};return a}function aG(b,a){if(null==a)throw new Error("Expected "+b+" to be present");return a}e.clear=function(){av=au},e(function(a){if(Object.values)return Object.values(a);var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(a[c]);return b});var k=function(b){function a(c){var a;return(a=b.call(this,c)||this).name=a.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a),a.constructor):a.stack=new Error(c).stack,a}return w(a,b),a}(i(Error));function aH(){var a=document.body;if(!a)throw new Error("Body element not found");return a}function aI(){return Boolean(document.body)&&"complete"===document.readyState}function aJ(){return Boolean(document.body)&&"interactive"===document.readyState}function aK(a){return encodeURIComponent(a)}function aL(e){var c,d,a,b;return c=aL,d=[e],a=c.__inline_memoize_cache__=c.__inline_memoize_cache__||{},b=as(d),a.hasOwnProperty(b)?a[b]:a[b]=(function(){var b={};if(!e|| -1===e.indexOf("="))return b;for(var c=0,d=e.split("&");c<d.length;c++){var a=d[c];(a=a.split("="))[0]&&a[1]&&(b[decodeURIComponent(a[0])]=decodeURIComponent(a[1]))}return b}).apply(void 0,d)}function aM(c,a){var b;return void 0===a&&(a={}),a&&Object.keys(a).length?(void 0===(b=x({},aL(c),a))&&(b={}),Object.keys(b).filter(function(a){return"string"==typeof b[a]||"boolean"==typeof b[a]}).map(function(c){var a=b[c];if("string"!=typeof a&&"boolean"!=typeof a)throw new TypeError("Invalid type for query");return aK(c)+"="+aK(a.toString())}).join("&")):c}function aN(a,b){return void 0===b&&(b=document),ao(a)?a:"string"==typeof a?b.querySelector(a):void 0}function aO(a){return new h(function(c,d){var e=az(a),b=aN(a);if(b)return c(b);if(aI())return d(new Error("Document is ready and element "+e+" does not exist"));var f=setInterval(function(){return(b=aN(a))?(c(b),void clearInterval(f)):aI()?(clearInterval(f),d(new Error("Document is ready and element "+e+" does not exist"))):void 0},10)})}e(function(){return new h(function(a){if(aI()||aJ())return a();var b=setInterval(function(){if(aI()||aJ())return clearInterval(b),a()},10)})});var aP,aQ=function(b){function a(){return b.apply(this,arguments)||this}return w(a,b),a}(k);function aR(a){if((aP=aP||new am).has(a)){var b=aP.get(a);if(b)return b}var c=new h(function(b,c){a.addEventListener("load",function(){(function(a){if(function(){for(var a=0;a<W.length;a++){var b=!1;try{b=W[a].closed}catch(c){}b&&(X.splice(a,1),W.splice(a,1))}}(),a&&a.contentWindow)try{W.push(a.contentWindow),X.push(a)}catch(b){}})(a),b(a)}),a.addEventListener("error",function(d){a.contentWindow?b(a):c(d)})});return aP.set(a,c),c}function aS(a){return aR(a).then(function(a){if(!a.contentWindow)throw new Error("Could not find window in iframe");return a.contentWindow})}function aT(a,c){void 0===a&&(a={});var d=a.style||{},b=function(c,a,j){void 0===c&&(c="div"),void 0===a&&(a={}),c=c.toLowerCase();var d,e,f,b=document.createElement(c);if(a.style&&aA(b.style,a.style),a.class&&(b.className=a.class.join(" ")),a.id&&b.setAttribute("id",a.id),a.attributes)for(var g=0,h=Object.keys(a.attributes);g<h.length;g++){var i=h[g];b.setAttribute(i,a.attributes[i])}if(a.styleSheet&&(d=b,e=a.styleSheet,void 0===f&&(f=window.document),d.styleSheet?d.styleSheet.cssText=e:d.appendChild(f.createTextNode(e))),a.html){if("iframe"===c)throw new Error("Iframe html can not be written unless container provided and iframe in DOM");b.innerHTML=a.html}return b}("iframe",{attributes:x({allowTransparency:"true"},a.attributes||{}),style:x({backgroundColor:"transparent",border:"none"},d),html:a.html,class:a.class}),e=window.navigator.userAgent.match(/MSIE|Edge/i);return b.hasAttribute("id")||b.setAttribute("id",j()),aR(b),c&&(function(b,a){void 0===a&&(a=document);var c=aN(b,a);if(c)return c;throw new Error("Can not find element: "+az(b))})(c).appendChild(b),(a.url||e)&&b.setAttribute("src",a.url||"about:blank"),b}function aU(a,b,c){return a.addEventListener(b,c),{cancel:function(){a.removeEventListener(b,c)}}}function aV(a){a.style.setProperty("display","")}function aW(a){a.style.setProperty("display","none","important")}function aX(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function aY(a){return!(a&&a.parentNode&&a.ownerDocument&&a.ownerDocument.documentElement&&a.ownerDocument.documentElement.contains(a))}function aZ(c,m,g){var d=void 0===g?{}:g,h=d.width,p=void 0===h||h,i=d.height,q=void 0===i||i,j=d.interval,e=void 0===j?100:j,k=d.win,b=void 0===k?window:k,n=c.offsetWidth,o=c.offsetHeight,r=!1;m({width:n,height:o});var l,f,a=function(){var a;if(!r&&Boolean((a=c).offsetWidth||a.offsetHeight||a.getClientRects().length)){var b=c.offsetWidth,d=c.offsetHeight;(p&&b!==n||q&&d!==o)&&m({width:b,height:d}),n=b,o=d}};return b.addEventListener("resize",a),void 0!==b.ResizeObserver?((l=new b.ResizeObserver(a)).observe(c),f=aC(a,10*e)):void 0!==b.MutationObserver?((l=new b.MutationObserver(a)).observe(c,{attributes:!0,childList:!0,subtree:!0,characterData:!1}),f=aC(a,10*e)):f=aC(a,e),{cancel:function(){r=!0,l.disconnect(),window.removeEventListener("resize",a),f.cancel()}}}function a$(a){for(;a.parentNode;)a=a.parentNode;return"[object ShadowRoot]"===a.toString()}var a_="undefined"!=typeof document?document.currentScript:null,a0=e(function(){if(a_||(a_=function(){try{var f=function(){try{throw new Error("_")}catch(a){return a.stack||""}}(),c=/.*at [^(]*\((.*):(.+):(.+)\)$/gi.exec(f),d=c&&c[1];if(!d)return;for(var a=0,e=[].slice.call(document.getElementsByTagName("script")).reverse();a<e.length;a++){var b=e[a];if(b.src&&b.src===d)return b}}catch(g){}}()))return a_;throw new Error("Can not determine current script")}),a1=j();function a2(a){return"string"==typeof a&&/^[0-9]+%$/.test(a)}function a3(a){if("number"==typeof a)return a;var b=a.match(/^([0-9]+)(px|%)$/);if(!b)throw new Error("Could not match css value from "+a);return parseInt(b[1],10)}function a4(a){return a3(a)+"px"}function a5(a){return"number"==typeof a?a4(a):a2(a)?a:a4(a)}function a6(a,c){var b;if("number"==typeof a)return a;if(a2(a))return parseInt(c*a3(a)/100,10);if("string"==typeof(b=a)&&/^[0-9]+px$/.test(b))return a3(a);throw new Error("Can not normalize dimension: "+a)}function a7(a){void 0===a&&(a=window);var b="__post_robot_10_0_46__";return a!==window?a[b]:a[b]=a[b]||{}}e(function(){try{b=a0()}catch(d){return a1}var b,a=b.getAttribute("data-uid");if(a&&"string"==typeof a||(a=b.getAttribute("data-uid-auto"))&&"string"==typeof a)return a;if(b.src){var c=function(b){for(var c="",a=0;a<b.length;a++){var d=b[a].charCodeAt(0)*a;b[a+1]&&(d+=b[a+1].charCodeAt(0)*(a-1)),c+=String.fromCharCode(97+Math.abs(d)%26)}return c}(JSON.stringify({src:b.src,dataset:b.dataset}));a="uid_"+c.slice(c.length-30)}else a=j();return b.setAttribute("data-uid-auto",a),a});var a8=function(){return{}};function a9(a,b){return void 0===a&&(a="store"),void 0===b&&(b=a8),aF(a7(),a,function(){var a=b();return{has:function(b){return a.hasOwnProperty(b)},get:function(b,c){return a.hasOwnProperty(b)?a[b]:c},set:function(c,b){return a[c]=b,b},del:function(b){delete a[b]},getOrSet:function(b,c){return aF(a,b,c)},reset:function(){a=b()},keys:function(){return Object.keys(a)}}})}var a,ba=function(){};function bb(){var a=a7();return a.WINDOW_WILDCARD=a.WINDOW_WILDCARD||new ba,a.WINDOW_WILDCARD}function bc(a,b){return void 0===a&&(a="store"),void 0===b&&(b=a8),a9("windowStore").getOrSet(a,function(){var c=new am,d=function(a){return c.getOrSet(a,b)};return{has:function(b){return d(b).hasOwnProperty(a)},get:function(c,e){var b=d(c);return b.hasOwnProperty(a)?b[a]:e},set:function(c,b){return d(c)[a]=b,b},del:function(b){delete d(b)[a]},getOrSet:function(b,c){return aF(d(b),a,c)}}})}function bd(){return a9("instance").getOrSet("instanceID",j)}function be(a,f){var b=f.domain,c=bc("helloPromises"),d=c.get(a);d&&d.resolve({domain:b});var e=h.resolve({domain:b});return c.set(a,e),e}function bf(a,b){return(0,b.send)(a,"postrobot_hello",{instanceID:bd()},{domain:"*",timeout:-1}).then(function(b){var c=b.origin,d=b.data.instanceID;return be(a,{domain:c}),{win:a,domain:c,instanceID:d}})}function bg(a,b){var c=b.send;return bc("windowInstanceIDPromises").getOrSet(a,function(){return bf(a,{send:c}).then(function(a){return a.instanceID})})}function bh(e,a,b){void 0===a&&(a=5e3),void 0===b&&(b="Window");var d,c=(d=e,bc("helloPromises").getOrSet(d,function(){return new h}));return -1!==a&&(c=c.timeout(a,new Error(b+" did not load after "+a+"ms"))),c}function bi(a){bc("knownWindows").set(a,!0)}function bj(a){return"object"==typeof a&&null!==a&&"string"==typeof a.__type__}function bk(a){return void 0===a?"undefined":null===a?"null":Array.isArray(a)?"array":"function"==typeof a?"function":"object"==typeof a?a instanceof Error?"error":"function"==typeof a.then?"promise":"[object RegExp]"===({}).toString.call(a)?"regex":"[object Date]"===({}).toString.call(a)?"date":"object":"string"==typeof a?"string":"number"==typeof a?"number":"boolean"==typeof a?"boolean":void 0}function bl(a,b){return{__type__:a,__val__:b}}var b,bm=((a={}).function=function(){},a.error=function(a){return bl("error",{message:a.message,stack:a.stack,code:a.code,data:a.data})},a.promise=function(){},a.regex=function(a){return bl("regex",a.source)},a.date=function(a){return bl("date",a.toJSON())},a.array=function(a){return a},a.object=function(a){return a},a.string=function(a){return a},a.number=function(a){return a},a.boolean=function(a){return a},a.null=function(a){return a},a[void 0]=function(a){return bl("undefined",a)},a),bn={},bo=((b={}).function=function(){throw new Error("Function serialization is not implemented; nothing to deserialize")},b.error=function(b){var d=b.stack,e=b.code,c=b.data,a=new Error(b.message);return a.code=e,c&&(a.data=c),a.stack=d+"\n\n"+a.stack,a},b.promise=function(){throw new Error("Promise serialization is not implemented; nothing to deserialize")},b.regex=function(a){return new RegExp(a)},b.date=function(a){return new Date(a)},b.array=function(a){return a},b.object=function(a){return a},b.string=function(a){return a},b.number=function(a){return a},b.boolean=function(a){return a},b.null=function(a){return a},b[void 0]=function(){},b),bp={};function l(){return!!Z(window).match(/MSIE|trident|edge\/12|edge\/13/i)}function m(a){return!ae(window,a)}function n(a,b){if(a){if(O()!==ag(a))return!0}else if(b&&!P(b))return!0;return!1}function o(b){var a=b.win,c=b.domain;return!(!l()||c&&!n(c,a)||a&&!m(a))}function bq(a){return"__postrobot_bridge___"+(a=a||ag(a)).replace(/[^a-zA-Z0-9]+/g,"_")}function p(){return Boolean(window.name&&window.name===bq(O()))}var br=new h(function(a){if(window.document&&window.document.body)return a(window.document.body);var b=setInterval(function(){if(window.document&&window.document.body)return clearInterval(b),a(window.document.body)},10)});function bs(a){bc("remoteWindowPromises").getOrSet(a,function(){return new h})}function bt(b){var a=bc("remoteWindowPromises").get(b);if(!a)throw new Error("Remote window promise not found");return a}function bu(a,b,c){bt(a).resolve(function(e,d,f){if(e!==a)throw new Error("Remote window does not match window");if(!af(d,b))throw new Error("Remote domain "+d+" does not match domain "+b);c.fireAndForget(f)})}function bv(a,b){bt(a).reject(b).catch(aw)}function q(e){for(var b=e.win,c=e.name,f=e.domain,d=a9("popupWindowsByName"),h=bc("popupWindowsByWin"),g=0,i=d.keys();g<i.length;g++){var j=i[g],k=d.get(j);k&&!Y(k.win)||d.del(j)}if(Y(b))return{win:b,name:c,domain:f};var a=h.getOrSet(b,function(){return c?d.getOrSet(c,function(){return{win:b,name:c}}):{win:b}});if(a.win&&a.win!==b)throw new Error("Different window already linked for window: "+(c||"undefined"));return c&&(a.name=c,d.set(c,a)),f&&(a.domain=f,bs(b)),h.set(b,a),a}function r(c){var k,a,e,l,m,n,f,p,b,r,s,t,g=c.on,d=c.send,i=c.receiveMessage;k=window.open,window.open=function(a,c,d,e){var b=k.call(this,function(a){if(0!==ag(a).indexOf("mock:"))return a;throw new Error("Mock urls not supported out of test mode")}(a),c,d,e);return b&&q({win:b,name:c,domain:a?ag(a):null}),b},a={on:g,send:d,receiveMessage:i},e=a.on,l=a.send,m=a.receiveMessage,n=a9("popupWindowsByName"),e("postrobot_open_tunnel",function(a){var d=a.source,b=a.origin,f=a.data,c=a9("bridges").get(b);if(!c)throw new Error("Can not find bridge promise for domain "+b);return c.then(function(c){if(d!==c)throw new Error("Message source does not matched registered bridge for domain "+b);if(!f.name)throw new Error("Register window expected to be passed window name");if(!f.sendMessage)throw new Error("Register window expected to be passed sendMessage method");if(!n.has(f.name))throw new Error("Window with name "+f.name+" does not exist, or was not opened by this window");var a=function(){return n.get(f.name)};if(!a().domain)throw new Error("We do not have a registered domain for window "+f.name);if(a().domain!==b)throw new Error("Message origin "+b+" does not matched registered window origin "+(a().domain||"unknown"));return bu(a().win,b,f.sendMessage),{sendMessage:function(c){if(window&&!window.closed&&a()){var b=a().domain;if(b)try{m({data:c,origin:b,source:a().win},{on:e,send:l})}catch(d){h.reject(d)}}}}})}),f={send:d},p=f.send,a7(window).openTunnelToParent=function(a){var d=a.name,k=a.source,l=a.canary,m=a.sendMessage,n=a9("tunnelWindows"),e=L(window);if(!e)throw new Error("No parent window found to open tunnel to");var b,f,g,h,i,c,o=(f=(b={name:d,source:k,canary:l,sendMessage:m}).name,g=b.source,h=b.canary,i=b.sendMessage,function(){for(var a=a9("tunnelWindows"),b=0,c=a.keys();b<c.length;b++){var d=c[b];Y(a[d].source)&&a.del(d)}}(),c=j(),a9("tunnelWindows").set(c,{name:f,source:g,canary:h,sendMessage:i}),c);return p(e,"postrobot_open_tunnel",{name:d,sendMessage:function(){var a=n.get(o);if(a&&a.source&&!Y(a.source)){try{a.canary()}catch(b){return}a.sendMessage.apply(this,arguments)}}},{domain:"*"})},b={on:g,send:d,receiveMessage:i},r=b.on,s=b.send,t=b.receiveMessage,h.try(function(){var b,a=M(window);if(a&&o({win:a}))return bs(a),(b=a,bc("remoteBridgeAwaiters").getOrSet(b,function(){return h.try(function(){var a=aa(b,bq(O()));if(a)return P(a)&&a7(Q(a))?a:new h(function(d){var b,c;b=setInterval(function(){if(a&&P(a)&&a7(Q(a)))return clearInterval(b),clearTimeout(c),d(a)},100),c=setTimeout(function(){return clearInterval(b),d()},2e3)})})})).then(function(b){return b?window.name?a7(Q(b)).openTunnelToParent({name:window.name,source:window,canary:function(){},sendMessage:function(a){try{window}catch(c){return}if(window&&!window.closed)try{t({data:a,origin:this.origin,source:this.source},{on:r,send:s})}catch(b){h.reject(b)}}}).then(function(b){var c=b.source,d=b.origin,e=b.data;if(c!==a)throw new Error("Source does not match opener");bu(c,d,e.sendMessage)}).catch(function(b){throw bv(a,b),b}):bv(a,new Error("Can not register with opener: window does not have a name")):bv(a,new Error("Can not register with opener: no bridge found in opener"))})})}function bw(){for(var a=a9("idToProxyWindow"),b=0,c=a.keys();b<c.length;b++){var d=c[b];a.get(d).shouldClean()&&a.del(d)}}function bx(a,b){var i=b.send,c=b.id,d=void 0===c?j():c,e=a.then(function(a){if(P(a))return Q(a).name}),f=a.then(function(a){if(Y(a))throw new Error("Window is closed, can not determine type");return M(a)?"popup":"iframe"});e.catch(aw),f.catch(aw);var g=function(){return a.then(function(a){if(!Y(a))return P(a)?Q(a).name:e})};return{id:d,getType:function(){return f},getInstanceID:function(b){var c={};function a(){for(var g=arguments,i=this,e=arguments.length,f=new Array(e),a=0;a<e;a++)f[a]=arguments[a];var d=as(f);return c.hasOwnProperty(d)||(c[d]=h.try(function(){return b.apply(i,g)}).finally(function(){delete c[d]})),c[d]}return a.reset=function(){c={}},aq(a,ap(b)+"::promiseMemoized")}(function(){return a.then(function(a){return bg(a,{send:i})})}),close:function(){return a.then(aj)},getName:g,focus:function(){return a.then(function(a){a.focus()})},isClosed:function(){return a.then(function(a){return Y(a)})},setLocation:function(c,b){return void 0===b&&(b={}),a.then(function(a){var e=window.location.protocol+"//"+window.location.host,f=b.method,d=void 0===f?"get":f,h=b.body;if(0===c.indexOf("/"))c=""+e+c;else if(!c.match(/^https?:\/\//)&&0!==c.indexOf(e))throw new Error("Expected url to be http or https url, or absolute path, got "+JSON.stringify(c));if("post"===d)return g().then(function(a){if(!a)throw new Error("Can not post to window without target name");!function(b){var j=b.url,k=b.target,c=b.body,f=b.method,l=void 0===f?"post":f,a=document.createElement("form");if(a.setAttribute("target",k),a.setAttribute("method",l),a.setAttribute("action",j),a.style.display="none",c)for(var d=0,g=Object.keys(c);d<g.length;d++){var h,i=g[d],e=document.createElement("input");e.setAttribute("name",i),e.setAttribute("value",null==(h=c[i])?void 0:h.toString()),a.appendChild(e)}aH().appendChild(a),a.submit(),aH().removeChild(a)}({url:c,target:a,method:d,body:h})});if("get"!==d)throw new Error("Unsupported method: "+d);if(P(a))try{if(a.location&&"function"==typeof a.location.replace)return void a.location.replace(c)}catch(i){}a.location=c})},setName:function(b){return a.then(function(a){q({win:a,name:b});var d=P(a),c=ai(a);if(!d)throw new Error("Can not set name for cross-domain window: "+b);Q(a).name=b,c&&c.setAttribute("name",b),e=h.resolve(b)})}}}var by=function(){function b(a){var b=a.send,c=a.win,d=a.serializedWindow;this.id=void 0,this.isProxyWindow=!0,this.serializedWindow=void 0,this.actualWindow=void 0,this.actualWindowPromise=void 0,this.send=void 0,this.name=void 0,this.actualWindowPromise=new h,this.serializedWindow=d||bx(this.actualWindowPromise,{send:b}),a9("idToProxyWindow").set(this.getID(),this),c&&this.setWindow(c,{send:b})}var a=b.prototype;return a.getID=function(){return this.serializedWindow.id},a.getType=function(){return this.serializedWindow.getType()},a.isPopup=function(){return this.getType().then(function(a){return"popup"===a})},a.setLocation=function(a,b){var c=this;return this.serializedWindow.setLocation(a,b).then(function(){return c})},a.getName=function(){return this.serializedWindow.getName()},a.setName=function(a){var b=this;return this.serializedWindow.setName(a).then(function(){return b})},a.close=function(){var a=this;return this.serializedWindow.close().then(function(){return a})},a.focus=function(){var e=this,a=this.isPopup(),b=this.getName(),c=h.hash({isPopup:a,name:b}).then(function(a){var b=a.name;a.isPopup&&b&&window.open("",b,"noopener")}),d=this.serializedWindow.focus();return h.all([c,d]).then(function(){return e})},a.isClosed=function(){return this.serializedWindow.isClosed()},a.getWindow=function(){return this.actualWindow},a.setWindow=function(a,b){var c=b.send;this.actualWindow=a,this.actualWindowPromise.resolve(this.actualWindow),this.serializedWindow=bx(this.actualWindowPromise,{send:c,id:this.getID()}),bc("winToProxyWindow").set(a,this)},a.awaitWindow=function(){return this.actualWindowPromise},a.matchWindow=function(b,a){var c=this,d=a.send;return h.try(function(){return c.actualWindow?b===c.actualWindow:h.hash({proxyInstanceID:c.getInstanceID(),knownWindowInstanceID:bg(b,{send:d})}).then(function(a){var e=a.proxyInstanceID===a.knownWindowInstanceID;return e&&c.setWindow(b,{send:d}),e})})},a.unwrap=function(){return this.actualWindow||this},a.getInstanceID=function(){return this.serializedWindow.getInstanceID()},a.shouldClean=function(){return Boolean(this.actualWindow&&Y(this.actualWindow))},a.serialize=function(){return this.serializedWindow},b.unwrap=function(a){return b.isProxyWindow(a)?a.unwrap():a},b.serialize=function(a,c){var d=c.send;return bw(),b.toProxyWindow(a,{send:d}).serialize()},b.deserialize=function(a,c){var d=c.send;return bw(),a9("idToProxyWindow").get(a.id)||new b({serializedWindow:a,send:d})},b.isProxyWindow=function(a){return Boolean(a&&!ah(a)&&a.isProxyWindow)},b.toProxyWindow=function(a,d){var e=d.send;if(bw(),b.isProxyWindow(a))return a;var c=a;return bc("winToProxyWindow").get(c)||new b({win:c,send:e})},b}();function bz(b,c,d,a,e){var g=bc("methodStore"),f=a9("proxyWindowMethods");by.isProxyWindow(a)?f.set(b,{val:c,name:d,domain:e,source:a}):(f.del(b),g.getOrSet(a,function(){return{}})[b]={domain:e,name:d,val:c,source:a})}function bA(b,a){var c=bc("methodStore"),d=a9("proxyWindowMethods");return c.getOrSet(b,function(){return{}})[a]||d.get(a)}function bB(b,e,c,f,g){k=(i={on:g.on,send:g.send}).on,l=i.send,a9("builtinListeners").getOrSet("functionCalls",function(){return k("postrobot_method",{domain:"*"},function(b){var d=b.source,g=b.origin,c=b.data,e=c.id,f=c.name,a=bA(d,e);if(!a)throw new Error("Could not find method '"+f+"' with id: "+c.id+" in "+O(window));var i=a.source,j=a.domain,k=a.val;return h.try(function(){if(!af(j,g))throw new Error("Method '"+c.name+"' domain "+JSON.stringify(aE(a.domain)?a.domain.source:a.domain)+" does not match origin "+g+" in "+O(window));if(by.isProxyWindow(i))return i.matchWindow(d,{send:l}).then(function(a){if(!a)throw new Error("Method call '"+c.name+"' failed - proxy window does not match source in "+O(window))})}).then(function(){return k.apply({source:d,origin:g},c.args)},function(a){return h.try(function(){if(k.onError)return k.onError(a)}).then(function(){var b;throw a.stack&&(a.stack="Remote call to "+f+"("+(void 0===(b=c.args)&&(b=[]),aD(b).map(function(a){return"string"==typeof a?"'"+a+"'":void 0===a?"undefined":null===a?"null":"boolean"==typeof a?a.toString():Array.isArray(a)?"[ ... ]":"object"==typeof a?"{ ... }":"function"==typeof a?"() => { ... }":"<"+typeof a+">"}).join(", ")+") failed\n\n")+a.stack),a})}).then(function(a){return{result:a,id:e,name:f}})})});var i,k,l,d=c.__id__||j();b=by.unwrap(b);var a=c.__name__||c.name||f;return"string"==typeof a&&"function"==typeof a.indexOf&&0===a.indexOf("anonymous::")&&(a=a.replace("anonymous::",f+"::")),by.isProxyWindow(b)?(bz(d,c,a,b,e),b.awaitWindow().then(function(b){bz(d,c,a,b,e)})):bz(d,c,a,b,e),bl("cross_domain_function",{id:d,name:a})}function bC(g,h,f,b){var a,c,d,e,i=b.on,j=b.send;return c=f,void 0===(d=((a={}).promise=function(d,e){var a,b,f,k,c;return a=g,b=h,f=d,bl("cross_domain_zalgo_promise",{then:bB(a,b,function(a,b){return f.then(a,b)},k=e,{on:(c={on:i,send:j}).on,send:c.send})})},a.function=function(a,b){return bB(g,h,a,b,{on:i,send:j})},a.object=function(a){return ah(a)||by.isProxyWindow(a)?bl("cross_domain_window",by.serialize(a,{send:j})):a},a))&&(d=bn),void 0===(e=JSON.stringify(c,function(c){var a=this[c];if(bj(this))return a;var b=bk(a);if(!b)return a;var e=d[b]||bm[b];return e?e(a,c):a}))?"undefined":e}function bD(d,e,b,c){var a,f=c.send;return function(a,b){if(void 0===b&&(b=bp),"undefined"!==a)return JSON.parse(a,function(f,a){if(bj(this))return a;if(bj(a)?(c=a.__type__,d=a.__val__):(c=bk(a),d=a),!c)return d;var c,d,e=b[c]||bo[c];return e?e(d,f):d})}(b,((a={}).cross_domain_zalgo_promise=function(b){var a;return a=b,new h(a.then)},a.cross_domain_function=function(h){var i,j,a,g,k,l,m,b,c;return i=d,j=e,a=h,g={send:f},k=a.id,l=a.name,m=g.send,b=function(b){function a(){var c=arguments;return by.toProxyWindow(i,{send:m}).awaitWindow().then(function(d){var e=bA(d,k);if(e&&e.val!==a)return e.val.apply({source:window,origin:O()},c);var f=[].slice.call(c);return b.fireAndForget?m(d,"postrobot_method",{id:k,name:l,args:f},{domain:j,fireAndForget:!0}):m(d,"postrobot_method",{id:k,name:l,args:f},{domain:j,fireAndForget:!1}).then(function(a){return a.data.result})}).catch(function(a){throw a})}return void 0===b&&(b={}),a.__name__=l,a.__origin__=j,a.__source__=i,a.__id__=k,a.origin=j,a},c=b(),c.fireAndForget=b({fireAndForget:!0}),c},a.cross_domain_window=function(a){return by.deserialize(a,{send:f})},a))}var f={};function bE(b,c,d,a){var e=a.on,g=a.send;return h.try(function(){var a=bc().getOrSet(b,function(){return{}});return a.buffer=a.buffer||[],a.buffer.push(d),a.flush=a.flush||h.flush().then(function(){if(Y(b))throw new Error("Window is closed");var j,k=bC(b,c,((j={}).__post_robot_10_0_46__=a.buffer||[],j),{on:e,send:g});delete a.buffer;for(var d=Object.keys(f),h=[],i=0;i<d.length;i++){var l=d[i];try{f[l](b,k,c)}catch(m){h.push(m)}}if(h.length===d.length)throw new Error("All post-robot messaging strategies failed:\n\n"+h.map(function(a,b){return b+". "+ay(a)}).join("\n\n"))}),a.flush.then(function(){delete a.flush})}).then(aw)}function bF(a){return a9("responseListeners").get(a)}function bG(a){a9("responseListeners").del(a)}function bH(a){return a9("erroredResponseListeners").has(a)}function bI(c){var g=c.name,d=c.win,a=c.domain,m=bc("requestListeners");if("*"===d&&(d=null),"*"===a&&(a=null),!g)throw new Error("Name required to get request listener");for(var e=0,h=[d,bb()];e<h.length;e++){var i=h[e];if(i){var j=m.get(i);if(j){var b=j[g];if(b){if(a&&"string"==typeof a){if(b[a])return b[a];if(b.__domain_regex__)for(var f=0,k=b.__domain_regex__;f<k.length;f++){var l=k[f],n=l.listener;if(af(l.regex,a))return n}}if(b["*"])return b["*"]}}}}}function bJ(c,d,a,b){var e=b.on,f=b.send,g=bI({name:a.name,win:c,domain:d}),i="postrobot_method"===a.name&&a.data&&"string"==typeof a.data.name?a.data.name+"()":a.name;function k(b,g,k){return h.flush().then(function(){if(!a.fireAndForget&&!Y(c))try{return bE(c,d,{id:j(),origin:O(window),type:"postrobot_message_response",hash:a.hash,name:a.name,ack:b,data:g,error:k},{on:e,send:f})}catch(h){throw new Error("Send response message failed for "+i+" in "+O()+"\n\n"+ay(h))}})}return h.all([h.flush().then(function(){if(!a.fireAndForget&&!Y(c))try{return bE(c,d,{id:j(),origin:O(window),type:"postrobot_message_ack",hash:a.hash,name:a.name},{on:e,send:f})}catch(b){throw new Error("Send ack message failed for "+i+" in "+O()+"\n\n"+ay(b))}}),h.try(function(){if(!g)throw new Error("No handler found for post message: "+a.name+" from "+d+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);return g.handler({source:c,origin:d,data:a.data})}).then(function(a){return k("success",a)},function(a){return k("error",null,a)})]).then(aw).catch(function(a){if(g&&g.handleError)return g.handleError(a);throw a})}function bK(d,b,c){if(!bH(c.hash)){var a=bF(c.hash);if(!a)throw new Error("No handler found for post message ack for message: "+c.name+" from "+b+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);try{if(!af(a.domain,b))throw new Error("Ack origin "+b+" does not match domain "+a.domain.toString());if(d!==a.win)throw new Error("Ack source does not match registered window")}catch(e){a.promise.reject(e)}a.ack=!0}}function bL(e,d,a){if(!bH(a.hash)){var b,c=bF(a.hash);if(!c)throw new Error("No handler found for post message response for message: "+a.name+" from "+d+" in "+window.location.protocol+"//"+window.location.host+window.location.pathname);if(!af(c.domain,d))throw new Error("Response origin "+d+" does not match domain "+(b=c.domain,Array.isArray(b)?"("+b.join(" | ")+")":G(b)?"RegExp("+b.toString()+")":b.toString()));if(e!==c.win)throw new Error("Response source does not match registered window");bG(a.hash),"error"===a.ack?c.promise.reject(a.error):"success"===a.ack&&c.promise.resolve({source:e,origin:d,data:a.data})}}function bM(d,g){var h=g.on,i=g.send,j=a9("receivedMessages");try{if(!window||window.closed||!d.source)return}catch(k){return}var b=d.source,c=d.origin,e=function(d,e,f,b){var a,g=b.on,h=b.send;try{a=bD(e,f,d,{on:g,send:h})}catch(i){return}if(a&&"object"==typeof a&&null!==a){var c=a.__post_robot_10_0_46__;if(Array.isArray(c))return c}}(d.data,b,c,{on:h,send:i});if(e){bi(b);for(var f=0;f<e.length;f++){var a=e[f];if(j.has(a.id)||(j.set(a.id,!0),Y(b)&&!a.fireAndForget))return;0===a.origin.indexOf("file:")&&(c="file://");try{"postrobot_message_request"===a.type?bJ(b,c,a,{on:h,send:i}):"postrobot_message_response"===a.type?bL(b,c,a):"postrobot_message_ack"===a.type&&bK(b,c,a)}catch(l){setTimeout(function(){throw l},0)}}}}function bN(c,a,b){if(!c)throw new Error("Expected name");if("function"==typeof(a=a||{})&&(b=a,a={}),!b)throw new Error("Expected handler");var d=function i(f,e){var c=f.name,d=f.win,a=f.domain,m=bc("requestListeners");if(!c||"string"!=typeof c)throw new Error("Name required to add request listener");if(d&&"*"!==d&&by.isProxyWindow(d)){var u=d.awaitWindow().then(function(b){return i({name:c,win:b,domain:a},e)});return{cancel:function(){u.then(function(a){return a.cancel()},aw)}}}var b=d;if(Array.isArray(b)){for(var n=[],g=0,j=b;g<j.length;g++)n.push(i({name:c,domain:a,win:j[g]},e));return{cancel:function(){for(var a=0;a<n.length;a++)n[a].cancel()}}}if(Array.isArray(a)){for(var o=[],h=0,k=a;h<k.length;h++)o.push(i({name:c,win:b,domain:k[h]},e));return{cancel:function(){for(var a=0;a<o.length;a++)o[a].cancel()}}}var p=bI({name:c,win:b,domain:a});b&&"*"!==b||(b=bb());var q=(a=a||"*").toString();if(p)throw new Error(b&&a?"Request listener already exists for "+c+" on domain "+a.toString()+" for "+(b===bb()?"wildcard":"specified")+" window":b?"Request listener already exists for "+c+" for "+(b===bb()?"wildcard":"specified")+" window":a?"Request listener already exists for "+c+" on domain "+a.toString():"Request listener already exists for "+c);var r,s,t=m.getOrSet(b,function(){return{}}),l=aF(t,c,function(){return{}});return aE(a)?(r=aF(l,"__domain_regex__",function(){return[]})).push(s={regex:a,listener:e}):l[q]=e,{cancel:function(){delete l[q],s&&(r.splice(r.indexOf(s,1)),r.length||delete l.__domain_regex__),Object.keys(l).length||delete t[c],b&&!Object.keys(t).length&&m.del(b)}}}({name:c,win:a.window,domain:a.domain||"*"},{handler:b||a.handler,handleError:a.errorHandler||function(a){throw a}});return{cancel:function(){d.cancel()}}}f.postrobot_post_message=function(b,c,a){0===a.indexOf("file:")&&(a="*"),b.postMessage(c,a)},f.postrobot_bridge=function(a,b,c){if(!l()&&!p())throw new Error("Bridge not needed for browser");if(P(a))throw new Error("Post message through bridge disabled between same domain windows");if(!1!==ae(window,a))throw new Error("Can only use bridge to communicate between two different windows, not between frames");!function(a,d,e){var b=ab(window,a),c=ab(a,window);if(!b&&!c)throw new Error("Can only send messages to and from parent and popup windows");bt(a).then(function(b){return b(a,d,e)})}(a,c,b)},f.postrobot_global=function(a,c){if(!Z(window).match(/MSIE|rv:11|trident|edge\/12|edge\/13/i))throw new Error("Global messaging not needed for browser");if(!P(a))throw new Error("Post message through global disabled between different domain windows");if(!1!==ae(window,a))throw new Error("Can only use global to communicate between two different windows, not between frames");var b=a7(a);if(!b)throw new Error("Can not find postRobot global on foreign window");b.receiveMessage({source:window,origin:O(),data:c})};var s,bO=function b(c,d,e,a){var f=(a=a||{}).domain||"*",g=a.timeout|| -1,i=a.timeout||5e3,k=a.fireAndForget||!1;return by.toProxyWindow(c,{send:b}).awaitWindow().then(function(a){return h.try(function(){if(function(b,c,a){if(!b)throw new Error("Expected name");if(a&&"string"!=typeof a&&!Array.isArray(a)&&!aE(a))throw new TypeError("Can not send "+b+". Expected domain "+JSON.stringify(a)+" to be a string, array, or regex");if(Y(c))throw new Error("Can not send "+b+". Target window is closed")}(d,a,f),function(b,a){var d=ac(a);if(d)return d===b;if(a===b||U(a)===a)return!1;for(var c=0,e=S(b);c<e.length;c++)if(e[c]===a)return!0;return!1}(window,a))return bh(a,i)}).then(function(c){var d,e,g,j,i;return d=a,e=f,g=(void 0===c?{}:c).domain,i=b,h.try(function(){return"string"==typeof e?e:h.try(function(){return g||bf(d,{send:i}).then(function(a){return a.domain})}).then(function(a){if(!af(e,e))throw new Error("Domain "+az(e)+" does not match "+az(e));return a})})}).then(function(o){var f=o,t="postrobot_method"===d&&e&&"string"==typeof e.name?e.name+"()":d,c=new h,i=d+"_"+j();if(!k){var l,m,p={name:d,win:a,domain:f,promise:c};l=i,m=p,a9("responseListeners").set(l,m);var n,q=bc("requestPromises").getOrSet(a,function(){return[]});q.push(c),c.catch(function(){var a;a=i,a9("erroredResponseListeners").set(a,!0),bG(i)});var r=(n=a,bc("knownWindows").get(n,!1))?1e4:2e3,s=g,u=r,v=s,w=aC(function(){return Y(a)?c.reject(new Error("Window closed for "+d+" before "+(p.ack?"response":"ack"))):p.cancelled?c.reject(new Error("Response listener was cancelled for "+d)):(u=Math.max(u-500,0),-1!==v&&(v=Math.max(v-500,0)),p.ack||0!==u?0===v?c.reject(new Error("No response for postMessage "+t+" in "+O()+" in "+s+"ms")):void 0:c.reject(new Error("No ack for postMessage "+t+" in "+O()+" in "+r+"ms")))},500);c.finally(function(){w.cancel(),q.splice(q.indexOf(c,1))}).catch(aw)}return bE(a,f,{id:j(),origin:O(window),type:"postrobot_message_request",hash:i,name:d,data:e,fireAndForget:k},{on:bN,send:b}).then(function(){return k?c.resolve():c},function(a){throw new Error("Send request message failed for "+t+" in "+O()+"\n\n"+ay(a))})})})};function bP(a){return by.toProxyWindow(a,{send:bO})}function bQ(b){for(var a=0,c=bc("requestPromises").get(b,[]);a<c.length;a++)c[a].reject(new Error("Window "+(Y(b)?"closed":"cleaned up")+" before response")).catch(aw)}function bR(a){return"[object RegExp]"===({}).toString.call(a)}function bS(a){return void 0===a&&(a=window),a.location.protocol}function bT(a){if(void 0===a&&(a=window),a.mockDomain){var b=a.mockDomain.split("//")[0];if(b)return b}return bS(a)}function bU(a){return void 0===a&&(a=window),"about:"===bT(a)}function bV(a){if(void 0===a&&(a=window),a)try{if(a.parent&&a.parent!==a)return a.parent}catch(b){}}function bW(a){if(void 0===a&&(a=window),a&&!bV(a))try{return a.opener}catch(b){}}function bX(a){try{return!0}catch(b){}return!1}function bY(a){void 0===a&&(a=window);var c=a.location;if(!c)throw new Error("Can not read window location");var b=bS(a);if(!b)throw new Error("Can not read window protocol");if("file:"===b)return"file://";if("about:"===b){var d=bV(a);return d&&bX()?bY(d):"about://"}var e=c.host;if(!e)throw new Error("Can not read window host");return b+"//"+e}function bZ(a){void 0===a&&(a=window);var b=bY(a);return b&&a.mockDomain&&0===a.mockDomain.indexOf("mock:")?a.mockDomain:b}function b$(a){if(!function(a){try{if(a===window)return!0}catch(d){}try{var b,c=Object.getOwnPropertyDescriptor(a,"location");if(c&& !1===c.enumerable)return!1}catch(e){}try{if(bU(a)&&bX())return!0}catch(f){}try{if(b=a,void 0===b&&(b=window),"mock:"===bT(b)&&bX())return!0}catch(g){}try{if(bY(a)===bY(window))return!0}catch(h){}return!1}(a))return!1;try{if(a===window||bU(a)&&bX()||bZ(window)===bZ(a))return!0}catch(b){}return!1}function b_(a){if(!b$(a))throw new Error("Expected window to be same domain");return a}function b0(a,b){if(!a||!b)return!1;var c=bV(b);return c?c===a:-1!==(function(a){var b=[];try{for(;a.parent!==a;)b.push(a.parent),a=a.parent}catch(c){}return b})(b).indexOf(a)}function b1(g){var a,c,b=[];try{a=g.frames}catch(i){a=g}try{c=a.length}catch(j){}if(0===c)return b;if(c){for(var d=0;d<c;d++){var h=void 0;try{h=a[d]}catch(k){continue}b.push(h)}return b}for(var e=0;e<100;e++){var f=void 0;try{f=a[e]}catch(l){break}if(!f)break;b.push(f)}return b}function b2(g){for(var a=[],b=0,d=b1(g);b<d.length;b++){var e=d[b];a.push(e);for(var c=0,f=b2(e);c<f.length;c++)a.push(f[c])}return a}function b3(a){void 0===a&&(a=window);try{if(a.top)return a.top}catch(e){}if(bV(a)===a)return a;try{if(b0(window,a)&&window.top)return window.top}catch(f){}try{if(b0(a,window)&&window.top)return window.top}catch(g){}for(var c=0,d=b2(a);c<d.length;c++){var b=d[c];try{if(b.top)return b.top}catch(h){}if(bV(b)===b)return b}}function b4(a){var c=b3(a);if(!c)throw new Error("Can not determine top window");var b=[].concat(b2(c),[c]);return -1===b.indexOf(a)&&(b=[].concat(b,[a],b2(a))),b}s={setupBridge:r,openBridge:function(b,a){var c=a9("bridges"),d=a9("bridgeFrames");return a=a||ag(b),c.getOrSet(a,function(){return h.try(function(){if(O()===a)throw new Error("Can not open bridge on the same domain as current domain: "+a);var e=bq(a);if(aa(window,e))throw new Error("Frame with name "+e+" already exists on page");var f,g,c,i=(f=e,g=b,(c=document.createElement("iframe")).setAttribute("name",f),c.setAttribute("id",f),c.setAttribute("style","display: none; margin: 0; padding: 0; border: 0px none; overflow: hidden;"),c.setAttribute("frameborder","0"),c.setAttribute("border","0"),c.setAttribute("scrolling","no"),c.setAttribute("allowTransparency","true"),c.setAttribute("tabindex","-1"),c.setAttribute("hidden","true"),c.setAttribute("title",""),c.setAttribute("role","presentation"),c.src=g,c);return d.set(a,i),br.then(function(a){a.appendChild(i);var c=i.contentWindow;return new h(function(a,b){i.addEventListener("load",a),i.addEventListener("error",b)}).then(function(){return bh(c,5e3,"Bridge "+b)}).then(function(){return c})})})})},linkWindow:q,linkUrl:function(a,b){q({win:a,domain:ag(b)})},isBridge:p,needsBridge:o,needsBridgeForBrowser:l,hasBridge:function(a,b){return a9("bridges").has(b||ag(a))},needsBridgeForWin:m,needsBridgeForDomain:n,destroyBridges:function(){for(var e=a9("bridges"),b=a9("bridgeFrames"),c=0,d=b.keys();c<d.length;c++){var a=b.get(d[c]);a&&a.parentNode&&a.parentNode.removeChild(a)}b.reset(),e.reset()}};var b5=[],b6=[];function b7(a,b){void 0===b&&(b=!0);try{if(a===window)return!1}catch(f){return!0}try{if(!a)return!0}catch(g){return!0}try{if(a.closed)return!0}catch(c){return!c||"Call was rejected by callee.\r\n"!==c.message}if(b&&b$(a))try{if(a.mockclosed)return!0}catch(h){}try{if(!a.parent||!a.top)return!0}catch(i){}var d=function(b,c){for(var a=0;a<b.length;a++)try{if(b[a]===c)return a}catch(d){}return -1}(b5,a);if(-1!==d){var e=b6[d];if(e&&function(b){if(!b.contentWindow||!b.parentNode)return!0;var c=b.ownerDocument;if(c&&c.documentElement&&!c.documentElement.contains(b)){for(var a=b;a.parentNode&&a.parentNode!==a;)a=a.parentNode;if(!a.host||!c.documentElement.contains(a.host))return!0}return!1}(e))return!0}return!1}function b8(a,b){for(var c=b1(a),e=0;e<c.length;e++){var d=c[e];try{if(b$(d)&&d.name===b&& -1!==c.indexOf(d))return d}catch(f){}}try{if(-1!==c.indexOf(a.frames[b]))return a.frames[b]}catch(g){}try{if(-1!==c.indexOf(a[b]))return a[b]}catch(h){}}function b9(a){return void 0===a&&(a=window),bW(a=a||window)||bV(a)||void 0}function ca(c,d){for(var a=0;a<c.length;a++)for(var e=c[a],b=0;b<d.length;b++)if(e===d[b])return!0;return!1}function cb(a){void 0===a&&(a=window);for(var c=0,b=a;b;)(b=bV(b))&&(c+=1);return c}function cc(b,a){if("string"==typeof b){if("string"==typeof a)return"*"===b||a===b;if(bR(a)||Array.isArray(a))return!1}return bR(b)?bR(a)?b.toString()===a.toString():!Array.isArray(a)&&Boolean(a.match(b)):!!Array.isArray(b)&&(Array.isArray(a)?JSON.stringify(b)===JSON.stringify(a):!bR(a)&&b.some(function(b){return cc(b,a)}))}function cd(a){return a.match(/^(https?|mock|file):\/\//)?a.split("/").slice(0,3).join("/"):bZ()}function ce(c,d,a,b){var e;return void 0===a&&(a=1e3),void 0===b&&(b=1/0),function f(){if(b7(c))return e&&clearTimeout(e),d();b<=0?clearTimeout(e):(b-=a,e=setTimeout(f,a))}(),{cancel:function(){e&&clearTimeout(e)}}}function cf(a){try{if(a===window)return!0}catch(b){if(b&&"Call was rejected by callee.\r\n"===b.message)return!0}try{if("[object Window]"===({}).toString.call(a))return!0}catch(c){if(c&&"Call was rejected by callee.\r\n"===c.message)return!0}try{if(window.Window&&a instanceof window.Window)return!0}catch(d){if(d&&"Call was rejected by callee.\r\n"===d.message)return!0}try{if(a&&a.self===a)return!0}catch(e){if(e&&"Call was rejected by callee.\r\n"===e.message)return!0}try{if(a&&a.parent===a)return!0}catch(f){if(f&&"Call was rejected by callee.\r\n"===f.message)return!0}try{if(a&&a.top===a)return!0}catch(g){if(g&&"Call was rejected by callee.\r\n"===g.message)return!0}try{if(a&&"__unlikely_value__"===a.__cross_domain_utils_window_check__)return!1}catch(h){return!0}try{if("postMessage"in a&&"self"in a&&"location"in a)return!0}catch(i){}return!1}function cg(a){if(0!==cd(a).indexOf("mock:"))return a;throw new Error("Mock urls not supported out of test mode")}function ch(a){if(!b$(a))throw new Error("Can not get global for window on different domain");return a.__zoid_9_0_87__||(a.__zoid_9_0_87__={}),a.__zoid_9_0_87__}function ci(a,b){try{return b(ch(a))}catch(c){}}function cj(a){return{get:function(){var b=this;return h.try(function(){if(b.source&&b.source!==window)throw new Error("Can not call get on proxy object from a remote window");return a})}}}function ck(b){var a=ch(b);return a.references=a.references||{},a.references}function cl(a){var o,c,b,d,e=a.data,k=a.metaData,l=a.sender,f=a.receiver,g=a.passByReference,h=a.basic,m=bP(f.win),i=void 0!==h&&h?JSON.stringify(e):bC(m,f.domain,e,{on:bN,send:bO}),n=void 0!==g&&g?(c=i,b=j(),ck(window)[b]=c,{type:"uid",uid:b}):{type:"raw",val:i};return{serializedData:(d={sender:{domain:l.domain},metaData:k,reference:n},ar(JSON.stringify(d))),cleanReference:function(){var a,b;a=window,"uid"===(b=n).type&&delete ck(a)[b.uid]}}}function cm(c){var g,b,d,a=c.sender,h=c.basic,e=(g=c.data,JSON.parse(function(a){if("function"==typeof atob)return decodeURIComponent([].map.call(atob(a),function(a){return"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)}).join(""));if("undefined"!=typeof Buffer)return Buffer.from(a,"base64").toString("utf8");throw new Error("Can not find window.atob or Buffer")}(g))),i=e.reference,f=e.metaData;b="function"==typeof a.win?a.win({metaData:f}):a.win,d="function"==typeof a.domain?a.domain({metaData:f}):"string"==typeof a.domain?a.domain:e.sender.domain;var j,l,m,k=function(b,a){if("raw"===a.type)return a.val;if("uid"===a.type)return ck(b)[a.uid];throw new Error("Unsupported ref type: "+a.type)}(b,i);return{data:void 0!==h&&h?JSON.parse(k):(j=b,bD(j,l=d,k,{on:bN,send:bO})),metaData:f,sender:{win:b,domain:d},reference:i}}var cn={STRING:"string",OBJECT:"object",FUNCTION:"function",BOOLEAN:"boolean",NUMBER:"number",ARRAY:"array"},co={JSON:"json",DOTIFY:"dotify",BASE64:"base64"},cp={IFRAME:"iframe",POPUP:"popup"},cq={RENDER:"zoid-render",RENDERED:"zoid-rendered",DISPLAY:"zoid-display",ERROR:"zoid-error",CLOSE:"zoid-close",DESTROY:"zoid-destroy",PROPS:"zoid-props",RESIZE:"zoid-resize",FOCUS:"zoid-focus"};function cr(a){return"__zoid__"+a.name+"__"+a.serializedPayload+"__"}function cs(b){if(!b)throw new Error("No window name");var a=b.split("__"),c=a[1],d=a[2],e=a[3];if("zoid"!==c)throw new Error("Window not rendered by zoid - got "+c);if(!d)throw new Error("Expected component name");if(!e)throw new Error("Expected serialized payload ref");return{name:d,serializedInitialPayload:e}}var ct=e(function(b){var a=cm({data:cs(b).serializedInitialPayload,sender:{win:function(a){return function(a){if("opener"===a.type)return aG("opener",bW(window));if("parent"===a.type&&"number"==typeof a.distance)return aG("parent",(f=window,void 0===(g=a.distance)&&(g=1),function(d,b){void 0===b&&(b=1);for(var a=d,c=0;c<b;c++){if(!a)return;a=bV(a)}return a}(f,cb(f)-g)));if("global"===a.type&&a.uid&&"string"==typeof a.uid){var f,g,c=function(){var g=a.uid,c=b9(window);if(!c)throw new Error("Can not find ancestor window");for(var b=0,d=b4(c);b<d.length;b++){var e=d[b];if(b$(e)){var f=ci(e,function(a){return a.windows&&a.windows[g]});if(f)return{v:f}}}}();if("object"==typeof c)return c.v}else if("name"===a.type){var b,d,e=a.name;return aG("namedWindow",(b=aG("ancestor",b9(window)),b8(b,d=e)||function g(b,c){var d=b8(b,c);if(d)return d;for(var a=0,e=b1(b);a<e.length;a++){var f=g(e[a],c);if(f)return f}}(b3(b)||b,d)))}throw new Error("Unable to find "+a.type+" parent component window")}(a.metaData.windowRef)}}});return{parent:a.sender,payload:a.data,reference:a.reference}});function cu(){return ct(window.name)}function cv(c,f,d,b,a){if(!c.hasOwnProperty(d))return b;var e=c[d];return"function"==typeof e.childDecorate?e.childDecorate({value:b,uid:a.uid,tag:a.tag,close:a.close,focus:a.focus,onError:a.onError,onProps:a.onProps,resize:a.resize,getParent:a.getParent,getParentDomain:a.getParentDomain,show:a.show,hide:a.hide,export:a.export,getSiblings:a.getSiblings}):b}function cw(){return h.try(function(){window.focus()})}function cx(){return h.try(function(){window.close()})}var cy=function(){return aw},cz=function(a){return ax(a.value)};function cA(c,d,f){for(var a=0,e=Object.keys(x({},c,d));a<e.length;a++){var b=e[a];f(b,d[b],c[b])}}function cB(b,c,e){var d,f,a,g={};return h.all((a=[],cA(d=c,b,function(b,c,d){var f,i,j,k=(f=b,i=c,j=d,h.resolve().then(function(){var a,b;if(null!=j&&i){var c=((a={}).get=i.queryParam,a.post=i.bodyParam,a)[e],d=((b={}).get=i.queryValue,b.post=i.bodyValue,b)[e];if(c)return h.hash({finalParam:h.try(function(){return"function"==typeof c?c({value:j}):"string"==typeof c?c:f}),finalValue:h.try(function(){var a;return"function"==typeof d&&null!=j?d({value:j}):j})}).then(function(d){var b,j=d.finalParam,a=d.finalValue;if("boolean"==typeof a)b=a.toString();else if("string"==typeof a)b=a.toString();else if("object"==typeof a&&null!==a){if(i.serialization===co.JSON)b=JSON.stringify(a);else if(i.serialization===co.BASE64)b=ar(JSON.stringify(a));else if(i.serialization===co.DOTIFY||!i.serialization){b=function e(b,c,d){for(var a in void 0===c&&(c=""),void 0===d&&(d={}),c=c?c+".":c,b)b.hasOwnProperty(a)&&null!=b[a]&&"function"!=typeof b[a]&&(b[a]&&Array.isArray(b[a])&&b[a].length&&b[a].every(function(a){return"object"!=typeof a})?d[""+c+a+"[]"]=b[a].join(","):b[a]&&"object"==typeof b[a]?d=e(b[a],""+c+a,d):d[""+c+a]=b[a].toString());return d}(a,f);for(var c=0,e=Object.keys(b);c<e.length;c++){var h=e[c];g[h]=b[h]}return}}else"number"==typeof a&&(b=a.toString());g[j]=b})}}));a.push(k)}),a)).then(function(){return g})}function cC(c){var i,k,l,t,u,v,w,y,z=c.uid,b=c.options,d=c.overrides,a=void 0===d?{}:d,f=c.parentWin,A=void 0===f?window:f,B=b.propsDef,C=b.containerTemplate,D=b.prerenderTemplate,E=b.tag,F=b.name,_=b.attributes,G=b.dimensions,H=b.autoResize,I=b.url,J=b.domain,K=b.exports,L=new h,M=[],N=g(),O={},P={},R={visible:!0},S=a.event?a.event:(i={},k={},l={on:function(a,b){var c=k[a]=k[a]||[];c.push(b);var d=!1;return{cancel:function(){d||(d=!0,c.splice(c.indexOf(b),1))}}},once:function(a,c){var b=l.on(a,function(){b.cancel(),c()});return b},trigger:function(e){for(var b=arguments.length,f=new Array(b>1?b-1:0),a=1;a<b;a++)f[a-1]=arguments[a];var d=k[e],g=[];if(d)for(var i=function(a){var b=d[a];g.push(h.try(function(){return b.apply(void 0,f)}))},c=0;c<d.length;c++)i(c);return h.all(g).then(aw)},triggerOnce:function(b){if(i[b])return h.resolve();i[b]=!0;for(var c=arguments.length,d=new Array(c>1?c-1:0),a=1;a<c;a++)d[a-1]=arguments[a];return l.trigger.apply(l,[b].concat(d))},reset:function(){k={}}}),T=a.props?a.props:{},U=a.onError,V=a.getProxyContainer,W=a.show,X=a.hide,Z=a.close,aa=a.renderContainer,ab=a.getProxyWindow,ac=a.setProxyWin,ad=a.openFrame,ae=a.openPrerenderFrame,af=a.prerender,ag=a.open,ah=a.openPrerender,$=a.watchForUnload,ai=a.getInternalState,aj=a.setInternalState,ak=function(){return"function"==typeof G?G({props:T}):G},al=function(){return h.try(function(){return a.resolveInitPromise?a.resolveInitPromise():L.resolve()})},am=function(b){return h.try(function(){return a.rejectInitPromise?a.rejectInitPromise(b):L.reject(b)})},an=function(f){for(var d={},b=0,e=Object.keys(T);b<e.length;b++){var c=e[b],a=B[c];a&& !1===a.sendToChild||a&&a.sameDomain&&!cc(f,bZ(window))||(d[c]=T[c])}return h.hash(d)},ao=function(){return h.try(function(){return ai?ai():R})},ap=function(a){return h.try(function(){return aj?aj(a):R=x({},R,a)})},aq=function(){return ab?ab():h.try(function(){var a=T.window;if(a){var b=bP(a);return N.register(function(){return a.close()}),b}return new by({send:bO})})},ar=function(a){return ac?ac(a):h.try(function(){t=a})},as=function(){return W?W():h.hash({setState:ap({visible:!0}),showElement:u?u.get().then(aV):null}).then(aw)},at=function(){return X?X():h.hash({setState:ap({visible:!1}),showElement:u?u.get().then(aW):null}).then(aw)},au=function(){return"function"==typeof I?I({props:T}):I},av=function(){return"function"==typeof _?_({props:T}):_},aB=function(){return cd(au())},aE=function(a,b){var c=b.windowName;return ad?ad(a,{windowName:c}):h.try(function(){if(a===cp.IFRAME)return cj(aT({attributes:x({name:c,title:F},av().iframe)}))})},aF=function(a){return ae?ae(a):h.try(function(){if(a===cp.IFRAME)return cj(aT({attributes:x({name:"__zoid_prerender_frame__"+F+"_"+j()+"__",title:"prerender__"+F},av().iframe)}))})},aG=function(a,b,c){return ah?ah(a,b,c):h.try(function(){if(a===cp.IFRAME){if(!c)throw new Error("Expected proxy frame to be passed");return c.get().then(function(a){return N.register(function(){return aX(a)}),aS(a).then(function(a){return b_(a)}).then(function(a){return bP(a)})})}if(a===cp.POPUP)return b;throw new Error("No render context available for "+a)})},aH=function(){return h.try(function(){if(t)return h.all([S.trigger(cq.FOCUS),t.focus()]).then(aw)})},aI=function(c,d,a,e){if(d===bZ(window))return{type:"global",uid:((f=ch(window)).windows=f.windows||{},f.windows[z]=window,N.register(function(){delete f.windows[z]}),z)};if(c!==window)throw new Error("Can not construct cross-domain window reference for different target window");if(T.window){var f,b=e.getWindow();if(!b)throw new Error("Can not construct cross-domain window reference for lazy window prop");if(b9(b)!==window)throw new Error("Can not construct cross-domain window reference for window prop with different ancestor")}if(a===cp.POPUP)return{type:"opener"};if(a===cp.IFRAME)return{type:"parent",distance:cb(window)};throw new Error("Can not construct window reference for child")},m=function(a,b){return h.try(function(){w=a,v=b,al(),N.register(function(){return b.close.fireAndForget().catch(aw)})})},aJ=function(a){var b=a.width,c=a.height;return h.try(function(){S.trigger(cq.RESIZE,{width:b,height:c})})},n=function(a){return h.try(function(){return S.trigger(cq.DESTROY)}).catch(aw).then(function(){return N.all(a)}).then(function(){L.asyncReject(a||new Error("Component destroyed"))})},aK=e(function(a){return h.try(function(){if(Z){if(b7(Z.__source__))return;return Z()}return h.try(function(){return S.trigger(cq.CLOSE)}).then(function(){return n(a||new Error("Component closed"))})})}),aL=function(b,a){var c=a.proxyWin,d=a.proxyFrame,e=a.windowName;return ag?ag(b,{proxyWin:c,proxyFrame:d,windowName:e}):h.try(function(){if(b===cp.IFRAME){if(!d)throw new Error("Expected proxy frame to be passed");return d.get().then(function(a){return aS(a).then(function(b){return N.register(function(){return aX(a)}),N.register(function(){return bQ(b)}),b})})}if(b===cp.POPUP){var f=ak(),g=f.width,a=void 0===g?"300px":g,h=f.height,c=void 0===h?"150px":h;a=a6(a,window.outerWidth),c=a6(c,window.outerWidth);var i=function(m,a){var g=(a=a||{}).closeOnUnload,j=void 0===g?1:g,h=a.name,k=void 0===h?"":h,b=a.width,c=a.height,d=0,e=0;b&&(window.outerWidth?e=Math.round((window.outerWidth-b)/2)+window.screenX:window.screen.width&&(e=Math.round((window.screen.width-b)/2))),c&&(window.outerHeight?d=Math.round((window.outerHeight-c)/2)+window.screenY:window.screen.height&&(d=Math.round((window.screen.height-c)/2))),delete a.closeOnUnload,delete a.name,b&&c&&(a=x({top:d,left:e,width:b,height:c,status:1,toolbar:0,menubar:0,resizable:1,scrollbars:1},a));var f,l=Object.keys(a).map(function(b){if(null!=a[b])return b+"="+az(a[b])}).filter(Boolean).join(",");try{f=window.open("",k,l)}catch(i){throw new aQ("Can not open popup window - "+(i.stack||i.message))}if(Y(f))throw new aQ("Can not open popup window - blocked");return j&&window.addEventListener("unload",function(){return f.close()}),f}(0,x({name:e,width:a,height:c},av().popup));return N.register(function(){return function(b){var c;if(void 0===(c=b)&&(c=window),Boolean(bV(c))){var a=function(b){if(b$(b))return b_(b).frameElement;for(var c=0,d=document.querySelectorAll("iframe");c<d.length;c++){var a=d[c];if(a&&a.contentWindow&&a.contentWindow===b)return a}}(b);if(a&&a.parentElement)return void a.parentElement.removeChild(a)}try{b.close()}catch(d){}}(i)}),N.register(function(){return bQ(i)}),i}throw new Error("No render context available for "+b)}).then(function(a){return c.setWindow(a,{send:bO}),c.setName(e).then(function(){return c})})},aP=function(){return h.try(function(){var a=aU(window,"unload",ax(function(){n(new Error("Window navigated away"))})),b=ce(A,n,3e3);if(N.register(b.cancel),N.register(a.cancel),$)return $()})},aR=function(a){var b=!1;return a.isClosed().then(function(c){return c?(b=!0,aK(new Error("Detected component window close"))):h.delay(200).then(function(){return a.isClosed()}).then(function(a){if(a)return b=!0,aK(new Error("Detected component window close"))})}).then(function(){return b})},o=function(a){return U?U(a):h.try(function(){if(-1===M.indexOf(a))return M.push(a),L.asyncReject(a),S.trigger(cq.ERROR,a)})},a_=new h,p=function(a){return h.try(function(){a_.resolve(a)})};m.onError=o;var a0=function(b,a){return b({uid:z,container:a.container,context:a.context,doc:a.doc,frame:a.frame,prerenderFrame:a.prerenderFrame,focus:aH,close:aK,state:O,props:T,tag:E,dimensions:ak(),event:S})},a1=function(a,b){var c=b.context;return af?af(a,{context:c}):h.try(function(){if(D){var b=a.getWindow();if(b&&b$(b)&&function(a){try{if(!a.location.href||"about:blank"===a.location.href)return!0}catch(b){}return!1}(b)){var d=(b=b_(b)).document,e=a0(D,{context:c,doc:d});if(e){if(e.ownerDocument!==d)throw new Error("Expected prerender template to have been created with document from child window");!function(h,d){var e=d.tagName.toLowerCase();if("html"!==e)throw new Error("Expected element to be html, got "+e);for(var a=h.document.documentElement,b=0,f=aD(a.children);b<f.length;b++)a.removeChild(f[b]);for(var c=0,g=aD(d.children);c<g.length;c++)a.appendChild(g[c])}(b,e);var g=H.width,h=void 0!==g&&g,i=H.height,j=void 0!==i&&i,k=H.element,f=void 0===k?"body":k;if((f=aN(f,d))&&(h||j)){var l=aZ(f,function(a){aJ({width:h?a.width:void 0,height:j?a.height:void 0})},{width:h,height:j,win:b});S.on(cq.RENDERED,l.cancel)}}}}})},a2=function(d,a){var b=a.proxyFrame,c=a.proxyPrerenderFrame,e=a.context,f=a.rerender;return aa?aa(d,{proxyFrame:b,proxyPrerenderFrame:c,context:e,rerender:f}):h.hash({container:d.get(),frame:b?b.get():null,prerenderFrame:c?c.get():null,internalState:ao()}).then(function(b){var c=b.container,d=b.internalState.visible,a=a0(C,{context:e,container:c,frame:b.frame,prerenderFrame:b.prerenderFrame,doc:document});if(a){d||aW(a),function(a,b){a.appendChild(b)}(c,a);var g=function(c,d){d=ax(d);var g,a,k,l=!1,h=[],e=function(){l=!0;for(var b=0;b<h.length;b++)h[b].disconnect();g&&g.cancel(),k&&k.removeEventListener("unload",i),a&&aX(a)},i=function(){l||(d(),e())};if(aY(c))return i(),{cancel:e};if(window.MutationObserver)for(var b=c.parentElement;b;){var f=new window.MutationObserver(function(){aY(c)&&i()});f.observe(b,{childList:!0}),h.push(f),b=b.parentElement}return(a=document.createElement("iframe")).setAttribute("name","__detect_close_"+j()+"__"),a.style.display="none",aS(a).then(function(a){(k=Q(a)).addEventListener("unload",i)}),c.appendChild(a),g=aC(function(){aY(c)&&i()},1e3),{cancel:e}}(a,function(){var b=new Error("Detected container element removed from DOM");return h.delay(1).then(function(){if(!aY(a))return N.all(b),f().then(al,am);aK(b)})});return N.register(function(){return g.cancel()}),N.register(function(){return aX(a)}),u=cj(a)}})},q=function(){return{state:O,event:S,close:aK,focus:aH,resize:aJ,onError:o,updateProps:a3,show:as,hide:at}},r=function(b){void 0===b&&(b={});var c,d,e,a,f,g,h,i,j,k,l=y,m=q();aA(P,b),c=B,d=T,e=P,a=m,f=l,g=a.state,h=a.close,i=a.focus,j=a.event,k=a.onError,cA(e,c,function(a,c,b){var l=!1,m=b;Object.defineProperty(d,a,{configurable:!0,enumerable:!0,get:function(){return l?m:(l=!0,function(){if(!c)return m;var n,o,p,q,r,s,l=c.alias;if(l&&null==b&&null!=e[l]&&(m=e[l]),c.value&&(m=c.value({props:d,state:g,close:h,focus:i,event:j,onError:k,container:f})),c.default&&null==m&&null==e[a]&&(m=c.default({props:d,state:g,close:h,focus:i,event:j,onError:k,container:f})),null!=m){if(c.type===cn.ARRAY?!Array.isArray(m):typeof m!==c.type)throw new TypeError("Prop is not of type "+c.type+": "+a)}else if(!1!==c.required&&null==e[a])throw new Error('Expected prop "'+a+'" to be defined');return null!=m&&c.decorate&&(m=c.decorate({value:m,props:d,state:g,close:h,focus:i,event:j,onError:k,container:f})),m}())}})}),cA(d,c,aw)},a3=function(a){return r(a),L.then(function(){var a=v,b=t;if(a&&b&&w)return an(w).then(function(c){return a.updateProps(c).catch(function(a){return aR(b).then(function(b){if(!b)throw a})})})})},a4=function(a){return V?V(a):h.try(function(){return aO(a)}).then(function(a){return a$(a)&&(a=function f(c){var b=function(b){var a=function(a){for(;a.parentNode;)a=a.parentNode;if(a$(a))return a}(b);if(a&&a.host)return a.host}(c);if(!b)throw new Error("Element is not in shadow dom");var d="shadow-slot-"+j(),e=document.createElement("slot");e.setAttribute("name",d),c.appendChild(e);var a=document.createElement("div");return a.setAttribute("slot",d),b.appendChild(a),a$(b)?f(a):a}(a)),y=a,cj(a)})};return{init:function(){S.on(cq.RENDER,function(){return T.onRender()}),S.on(cq.DISPLAY,function(){return T.onDisplay()}),S.on(cq.RENDERED,function(){return T.onRendered()}),S.on(cq.CLOSE,function(){return T.onClose()}),S.on(cq.DESTROY,function(){return T.onDestroy()}),S.on(cq.RESIZE,function(){return T.onResize()}),S.on(cq.FOCUS,function(){return T.onFocus()}),S.on(cq.PROPS,function(a){return T.onProps(a)}),S.on(cq.ERROR,function(a){return T&&T.onError?T.onError(a):am(a).then(function(){setTimeout(function(){throw a},1)})}),N.register(S.reset)},render:function(a){var c=a.target,d=a.container,e=a.context,f=a.rerender;return h.try(function(){var R=aB(),C=J||aB();!function(a,c,b){if(a!==window){if(!function(a,b){var c=b3(a)||a,d=b3(b)||b;try{if(c&&d)return c===d}catch(i){}var e=b4(a),f=b4(b);if(ca(e,f))return!0;var g=bW(c),h=bW(d);return g&&ca(b4(g),f)||h&&ca(b4(h),e),!1}(window,a))throw new Error("Can only renderTo an adjacent frame");var d=bZ();if(!cc(c,d)&&!b$(a))throw new Error("Can not render remotely to "+c.toString()+" - can only render to "+d);if(b&&"string"!=typeof b)throw new Error("Container passed to renderTo must be a string selector, got "+typeof b+" }")}}(c,C,d);var D=h.try(function(){if(c!==window)return function(c,g){for(var d={},a=0,e=Object.keys(T);a<e.length;a++){var b=e[a],f=B[b];f&&f.allowDelegate&&(d[b]=T[b])}var h=bO(g,"zoid_delegate_"+F,{uid:z,overrides:{props:d,event:S,close:aK,onError:o,getInternalState:ao,setInternalState:ap,resolveInitPromise:al,rejectInitPromise:am}}).then(function(a){var b=a.data.parent;return N.register(function(a){if(!b7(g))return b.destroy(a)}),b.getDelegateOverrides()}).catch(function(a){throw new Error("Unable to delegate rendering. Possibly the component is not loaded in the target window.\n\n"+ay(a))});return V=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.getProxyContainer.apply(a,c)})},aa=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.renderContainer.apply(a,c)})},W=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.show.apply(a,c)})},X=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.hide.apply(a,c)})},$=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.watchForUnload.apply(a,c)})},c===cp.IFRAME?(ab=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.getProxyWindow.apply(a,c)})},ad=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.openFrame.apply(a,c)})},ae=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.openPrerenderFrame.apply(a,c)})},af=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.prerender.apply(a,c)})},ag=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.open.apply(a,c)})},ah=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.openPrerender.apply(a,c)})}):c===cp.POPUP&&(ac=function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return h.then(function(a){return a.setProxyWin.apply(a,c)})}),h}(e,c)}),U=T.window,G=aP(),l=cB(B,T,"post"),H=S.trigger(cq.RENDER),g=a4(d),n=aq(),q=g.then(function(){return r()}),u=q.then(function(){return cB(B,T,"get").then(function(k){var f,g,a,h,i,j,b,c,d,e;return f=cg(au()),i=(g={query:k}).query||{},j=g.hash||{},b=f.split("#"),h=b[1],c=(a=b[0]).split("?"),a=c[0],d=aM(c[1],i),e=aM(h,j),d&&(a=a+"?"+d),e&&(a=a+"#"+e),a})}),_=n.then(function(k){var a,l,b,g,h,i,f,n,j,q,d,r,s,t;return(g=(b=l={proxyWin:(a={proxyWin:k,initialChildDomain:R,childDomainMatch:C,target:c,context:e}).proxyWin,initialChildDomain:a.initialChildDomain,childDomainMatch:a.childDomainMatch,target:a.target,context:a.context}).proxyWin,h=b.initialChildDomain,i=b.childDomainMatch,f=b.target,n=void 0===f?window:f,j=b.context,(r=(d=q={proxyWin:g,initialChildDomain:h,childDomainMatch:i,context:j}).proxyWin,s=d.childDomainMatch,t=d.context,an(d.initialChildDomain).then(function(a){var b;return{uid:z,context:t,tag:E,childDomainMatch:s,version:"9_0_87",props:a,exports:(b=r,{init:function(a){return m(this.origin,a)},close:aK,checkClose:function(){return aR(b)},resize:aJ,onError:o,show:as,hide:at,export:p})}})).then(function(b){var a=cl({data:b,metaData:{windowRef:aI(n,h,j,g)},sender:{domain:bZ(window)},receiver:{win:g,domain:i},passByReference:h===bZ()}),c=a.serializedData;return N.register(a.cleanReference),c})).then(function(a){return cr({name:F,serializedPayload:a})})}),i=_.then(function(a){return aE(e,{windowName:a})}),j=aF(e),v=h.hash({proxyContainer:g,proxyFrame:i,proxyPrerenderFrame:j}).then(function(a){return a2(a.proxyContainer,{context:e,proxyFrame:a.proxyFrame,proxyPrerenderFrame:a.proxyPrerenderFrame,rerender:f})}).then(function(a){return a}),a=h.hash({windowName:_,proxyFrame:i,proxyWin:n}).then(function(a){var b=a.proxyWin;return U?b:aL(e,{windowName:a.windowName,proxyWin:b,proxyFrame:a.proxyFrame})}),w=h.hash({proxyWin:a,proxyPrerenderFrame:j}).then(function(a){return aG(e,a.proxyWin,a.proxyPrerenderFrame)}),x=a.then(function(a){return t=a,ar(a)}),k=h.hash({proxyPrerenderWin:w,state:x}).then(function(a){return a1(a.proxyPrerenderWin,{context:e})}),y=h.hash({proxyWin:a,windowName:_}).then(function(a){if(U)return a.proxyWin.setName(a.windowName)}),I=h.hash({body:l}).then(function(a){return b.method?b.method:Object.keys(a.body).length?"post":"get"}),A=h.hash({proxyWin:a,windowUrl:u,body:l,method:I,windowName:y,prerender:k}).then(function(a){return a.proxyWin.setLocation(a.windowUrl,{method:a.method,body:a.body})}),K=a.then(function(a){!function a(b,c){var d=!1;return N.register(function(){d=!0}),h.delay(2e3).then(function(){return b.isClosed()}).then(function(e){if(!d)return e?aK(new Error("Detected "+c+" close")):a(b,c)})}(a,e)}),M=h.hash({container:v,prerender:k}).then(function(){return S.trigger(cq.DISPLAY)}),O=a.then(function(a){var c,d,f;return c=a,d=R,f=e,h.try(function(){return c.awaitWindow()}).then(function(c){if(s&&s.needsBridge({win:c,domain:d})&&!s.hasBridge(d,d)){var a="function"==typeof b.bridgeUrl?b.bridgeUrl({props:T}):b.bridgeUrl;if(!a)throw new Error("Bridge needed to render "+f);var e=cd(a);return s.linkUrl(c,d),s.openBridge(cg(a),e)}})}),P=A.then(function(){return h.try(function(){var a=T.timeout;if(a)return L.timeout(a,new Error("Loading component timed out after "+a+" milliseconds"))})}),Q=L.then(function(){return S.trigger(cq.RENDERED)});return h.hash({initPromise:L,buildUrlPromise:u,onRenderPromise:H,getProxyContainerPromise:g,openFramePromise:i,openPrerenderFramePromise:j,renderContainerPromise:v,openPromise:a,openPrerenderPromise:w,setStatePromise:x,prerenderPromise:k,loadUrlPromise:A,buildWindowNamePromise:_,setWindowNamePromise:y,watchForClosePromise:K,onDisplayPromise:M,openBridgePromise:O,runTimeoutPromise:P,onRenderedPromise:Q,delegatePromise:D,watchForUnloadPromise:G,finalSetPropsPromise:q})}).catch(function(a){return h.all([o(a),n(a)]).then(function(){throw a},function(){throw a})}).then(aw)},destroy:n,getProps:function(){return T},setProps:r,export:p,getHelpers:q,getDelegateOverrides:function(){return h.try(function(){return{getProxyContainer:a4,show:as,hide:at,renderContainer:a2,getProxyWindow:aq,watchForUnload:aP,openFrame:aE,openPrerenderFrame:aF,prerender:a1,open:aL,openPrerender:aG,setProxyWin:ar}})},getExports:function(){return K({getExports:function(){return a_}})}}}function cD(a){var b=a.uid,d=a.frame,e=a.prerenderFrame,f=a.doc,h=a.props,i=a.event,j=a.dimensions,k=j.width,l=j.height;if(d&&e){var c=f.createElement("div");c.setAttribute("id",b);var g=f.createElement("style");return h.cspNonce&&g.setAttribute("nonce",h.cspNonce),g.appendChild(f.createTextNode("\n            #"+b+" {\n                display: inline-block;\n                position: relative;\n                width: "+k+";\n                height: "+l+";\n            }\n\n            #"+b+" > iframe {\n                display: inline-block;\n                position: absolute;\n                width: 100%;\n                height: 100%;\n                top: 0;\n                left: 0;\n                transition: opacity .2s ease-in-out;\n            }\n\n            #"+b+" > iframe.zoid-invisible {\n                opacity: 0;\n            }\n\n            #"+b+" > iframe.zoid-visible {\n                opacity: 1;\n        }\n        ")),c.appendChild(d),c.appendChild(e),c.appendChild(g),e.classList.add("zoid-visible"),d.classList.add("zoid-invisible"),i.on(cq.RENDERED,function(){e.classList.remove("zoid-visible"),e.classList.add("zoid-invisible"),d.classList.remove("zoid-invisible"),d.classList.add("zoid-visible"),setTimeout(function(){aX(e)},1)}),i.on(cq.RESIZE,function(a){var b=a.width,d=a.height;"number"==typeof b&&(c.style.width=a5(b)),"number"==typeof d&&(c.style.height=a5(d))}),c}}function cE(d){var a=d.doc,e=d.props,f=a.createElement("html"),b=a.createElement("body"),c=a.createElement("style"),g=a.createElement("div");return g.classList.add("spinner"),e.cspNonce&&c.setAttribute("nonce",e.cspNonce),f.appendChild(b),b.appendChild(g),b.appendChild(c),c.appendChild(a.createTextNode("\n            html, body {\n                width: 100%;\n                height: 100%;\n            }\n\n            .spinner {\n                position: fixed;\n                max-height: 60vmin;\n                max-width: 60vmin;\n                height: 40px;\n                width: 40px;\n                top: 50%;\n                left: 50%;\n                box-sizing: border-box;\n                border: 3px solid rgba(0, 0, 0, .2);\n                border-top-color: rgba(33, 128, 192, 0.8);\n                border-radius: 100%;\n                animation: rotation .7s infinite linear;\n            }\n\n            @keyframes rotation {\n                from {\n                    transform: translateX(-50%) translateY(-50%) rotate(0deg);\n                }\n                to {\n                    transform: translateX(-50%) translateY(-50%) rotate(359deg);\n                }\n            }\n        ")),f}var cF=g(),cG=g(),cH=function(d){a7().initialized||(a7().initialized=!0,o=(n={on:bN,send:bO}).on,p=n.send,(q=a7()).receiveMessage=q.receiveMessage||function(a){return bM(a,{on:o,send:p})},f={on:bN,send:bO},g=f.on,i=f.send,a9().getOrSet("postMessageListener",function(){return aU(window,"message",function(b){var c,a,d,e;c=b,d=(a={on:g,send:i}).on,e=a.send,h.try(function(){var b=c.source||c.sourceElement,a=c.origin||c.originalEvent&&c.originalEvent.origin,f=c.data;if("null"===a&&(a="file://"),b){if(!a)throw new Error("Post message did not have origin domain");bM({source:b,origin:a,data:f},{on:d,send:e})}})})}),r({on:bN,send:bO,receiveMessage:bM}),k={on:bN,send:bO},l=k.on,m=k.send,a9("builtinListeners").getOrSet("helloListener",function(){var b=l("postrobot_hello",{domain:"*"},function(a){return be(a.source,{domain:a.origin}),{instanceID:bd()}}),a=ac();return a&&bf(a,{send:m}).catch(function(a){}),b}));var f,g,i,k,l,m,n,o,p,q,b=function(k){var d,f,a=function(a){var b=a.tag,q=a.url,r=a.domain,s=a.bridgeUrl,c=a.props,d=a.dimensions,e=a.autoResize,f=a.allowedParentDomains,g=a.attributes,h=a.defaultContext,t=void 0===h?cp.IFRAME:h,i=a.containerTemplate,j=void 0===i?cD:i,k=a.prerenderTemplate,_=a.validate,l=a.eligible,m=a.logger,n=a.exports,o=void 0===n?aw:n,u=a.method,p=a.children,v=b.replace(/-/g,"_"),w=x({},{window:{type:cn.OBJECT,sendToChild:!1,required:!1,allowDelegate:!0,validate:function(b){var a=b.value;if(!cf(a)&&!by.isProxyWindow(a))throw new Error("Expected Window or ProxyWindow");if(cf(a)){if(b7(a))throw new Error("Window is closed");if(!b$(a))throw new Error("Window is not same domain")}},decorate:function(a){return bP(a.value)}},timeout:{type:cn.NUMBER,required:!1,sendToChild:!1},cspNonce:{type:cn.STRING,required:!1},onDisplay:{type:cn.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:cy,decorate:cz},onRendered:{type:cn.FUNCTION,required:!1,sendToChild:!1,default:cy,decorate:cz},onRender:{type:cn.FUNCTION,required:!1,sendToChild:!1,default:cy,decorate:cz},onClose:{type:cn.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:cy,decorate:cz},onDestroy:{type:cn.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:cy,decorate:cz},onResize:{type:cn.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:cy},onFocus:{type:cn.FUNCTION,required:!1,sendToChild:!1,allowDelegate:!0,default:cy},close:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.close}},focus:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.focus}},resize:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.resize}},uid:{type:cn.STRING,required:!1,sendToChild:!1,childDecorate:function(a){return a.uid}},tag:{type:cn.STRING,required:!1,sendToChild:!1,childDecorate:function(a){return a.tag}},getParent:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.getParent}},getParentDomain:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.getParentDomain}},show:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.show}},hide:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.hide}},export:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.export}},onError:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.onError}},onProps:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.onProps}},getSiblings:{type:cn.FUNCTION,required:!1,sendToChild:!1,childDecorate:function(a){return a.getSiblings}}},void 0===c?{}:c);if(!j)throw new Error("Container template required");return{name:v,tag:b,url:q,domain:r,bridgeUrl:s,method:u,propsDef:w,dimensions:void 0===d?{}:d,autoResize:void 0===e?{}:e,allowedParentDomains:void 0===f?"*":f,attributes:void 0===g?{}:g,defaultContext:t,containerTemplate:j,prerenderTemplate:void 0===k?cE:k,validate:_,logger:void 0===m?{info:aw}:m,eligible:void 0===l?function(){return{eligible:!0}}:l,children:void 0===p?function(){return{}}:p,exports:"function"==typeof o?o:function(c){for(var f=c.getExports,d={},e=function(b,c){var a=c[b],e=o[a].type,g=f().then(function(b){return b[a]});d[a]=e===cn.FUNCTION?function(){for(var b=arguments.length,c=new Array(b),a=0;a<b;a++)c[a]=arguments[a];return g.then(function(a){return a.apply(void 0,c)})}:g},a=0,b=Object.keys(o);a<b.length;a++)e(a,b);return d}}}(k),g=a.name,c=a.tag,n=a.defaultContext,o=a.eligible,p=a.children,b=ch(window),l=[],m=function(){if(function(a){try{return cs(window.name).name===a}catch(b){}return!1}(g)){var a=cu().payload;if(a.tag===c&&cc(a.childDomainMatch,bZ()))return!0}return!1},i=e(function(){if(m()){if(window.xprops)throw delete b.components[c],new Error("Can not register "+g+" as child - child already registered");var d=function(c){var g,i=c.tag,j=c.propsDef,k=c.autoResize,l=c.allowedParentDomains,m=[],d=cu(),e=d.parent,b=d.payload,n=e.win,o=e.domain,p=new h,f=b.version,q=b.uid,a=b.exports,r=b.context,s=b.props;if("9_0_87"!==f)throw new Error("Parent window has zoid version "+f+", child window has version 9_0_87");var t=a.show,u=a.hide,v=a.close,_=a.onError,w=a.checkClose,x=a.export,y=a.resize,z=a.init,A=function(){return n},B=function(){return o},C=function(a){return m.push(a),{cancel:function(){m.splice(m.indexOf(a),1)}}},D=function(a){return y.fireAndForget({width:a.width,height:a.height})},E=function(a){return p.resolve(a),x(a)},F=function(f){var a=(void 0===f?{}:f).anyParent,h=[],b=g.parent;if(void 0===a&&(a=!b),!a&&!b)throw new Error("No parent found for "+i+" child");for(var d=0,j=b4(window);d<j.length;d++){var e=j[d];if(b$(e)){var c=b_(e).xprops;if(c&&A()===c.getParent()){var k=c.parent;if(a||!b||k&&k.uid===b.uid){var l=ci(e,function(a){return a.exports});h.push({props:c,exports:l})}}}}return h},G=function(d,e,a){void 0===a&&(a=!1);var c=function(n,c,e,o,j,f){void 0===f&&(f=!1);for(var b={},g=0,k=Object.keys(e);g<k.length;g++){var d=k[g],a=c[d];if(!a||!a.sameDomain||o===bZ(window)&&b$(n)){var l=cv(c,0,d,e[d],j);b[d]=l,a&&a.alias&&!b[a.alias]&&(b[a.alias]=l)}}if(!f)for(var h=0,m=Object.keys(c);h<m.length;h++){var i=m[h];e.hasOwnProperty(i)||(b[i]=cv(c,0,i,void 0,j))}return b}(n,j,d,e,{tag:i,show:t,hide:u,close:v,focus:cw,onError:_,resize:D,getSiblings:F,onProps:C,getParent:A,getParentDomain:B,uid:q,export:E},a);g?aA(g,c):g=c;for(var b=0;b<m.length;b++)(0,m[b])(g)},H=function(a){return h.try(function(){return G(a,o,!0)})};return{init:function(){return h.try(function(){return b$(n)&&function(b){var d=b.componentName,c=b.parentComponentWindow,a=cm({data:cs(window.name).serializedInitialPayload,sender:{win:c},basic:!0}),e=a.sender;if("uid"===a.reference.type||"global"===a.metaData.windowRef.type){var f=cl({data:a.data,metaData:{windowRef:function(a,b){if(void 0===b&&(b=window),a===bV(b))return{type:"parent",distance:cb(a)};if(a===bW(b))return{type:"opener"};if(b$(a)&&(d=a)!==b3(d)){var d,c=b_(a).name;if(c)return{type:"name",name:c}}}(c)},sender:{domain:e.domain},receiver:{win:window,domain:bZ()},basic:!0});window.name=cr({name:d,serializedPayload:f.serializedData})}}({componentName:c.name,parentComponentWindow:n}),ch(window).exports=c.exports({getExports:function(){return p}}),function(b,a){if(!cc(b,a))throw new Error("Can not be rendered by domain: "+a)}(l,o),bi(n),window.addEventListener("beforeunload",function(){w.fireAndForget()}),window.addEventListener("unload",function(){w.fireAndForget()}),ce(n,function(){cx()}),z({updateProps:H,close:cx})}).then(function(){var c,d,a,e,b;return(d=void 0!==(c=k.width)&&c,a=k.height,e=void 0!==a&&a,b=k.element,aO(void 0===b?"body":b).catch(aw).then(function(a){return{width:d,height:e,element:a}})).then(function(a){var b=a.width,c=a.height,d=a.element;d&&(b||c)&&r!==cp.POPUP&&aZ(d,function(a){D({width:b?a.width:void 0,height:c?a.height:void 0})},{width:b,height:c})})}).catch(function(a){_(a)})},getProps:function(){return g||(G(s,o),g)}}}(a);return d.init(),d}});if(i(),d=bN("zoid_allow_delegate_"+g,function(){return!0}),f=bN("zoid_delegate_"+g,function(b){var c=b.data;return{parent:cC({uid:c.uid,options:a,overrides:c.overrides,parentWin:b.source})}}),cG.register(d.cancel),cG.register(f.cancel),b.components=b.components||{},b.components[c])throw new Error("Can not register multiple components with the same tag: "+c);return b.components[c]=!0,{init:function r(k){var e,m="zoid-"+c+"-"+j(),b=k||{},f=o({props:b}),i=f.eligible,s=f.reason,t=b.onDestroy;b.onDestroy=function(){if(e&&i&&l.splice(l.indexOf(e),1),t)return t.apply(void 0,arguments)};var d=cC({uid:m,options:a});d.init(),i?d.setProps(b):b.onDestroy&&b.onDestroy(),cF.register(function(a){return d.destroy(a||new Error("zoid destroyed all components"))});var q=function(a){var c=(void 0===a?{}:a).decorate;return r((void 0===c?aB:c)(b))},u=function(a,c,f){return h.try(function(){if(!i){var c,e,j=new Error(s||g+" component is not eligible");return d.destroy(j).then(function(){throw j})}if(!cf(a))throw new Error("Must pass window to renderTo");return c=b,e=f,h.try(function(){if(c.window)return bP(c.window).getType();if(e){if(e!==cp.IFRAME&&e!==cp.POPUP)throw new Error("Unrecognized context: "+e);return e}return n})}).then(function(b){if(c=function(b,a){if(a){if("string"!=typeof a&&!ao(a))throw new TypeError("Expected string or element selector to be passed");return a}if(b===cp.POPUP)return"body";throw new Error("Expected element to be passed to render iframe")}(b,c),a!==window&&"string"!=typeof c)throw new Error("Must pass string element when rendering to another window");return d.render({target:a,container:c,context:b,rerender:function(){var b=q();return aA(e,b),b.renderTo(a,c,f)}})}).catch(function(a){return d.destroy(a).then(function(){throw a})})};return e=x({},d.getExports(),d.getHelpers(),function(){for(var c=p(),e={},a=0,b=Object.keys(c);a<b.length;a++)(function(b,f){var a=f[b],g=c[a];e[a]=function(a){var b=x({},a,{parent:{uid:m,props:d.getProps(),export:d.export}});return g(b)}})(a,b);return e}(),{isEligible:function(){return i},clone:q,render:function(a,b){return u(window,a,b)},renderTo:function(a,b,c){return u(a,b,c)}}),i&&l.push(e),e},instances:l,driver:function(a,b){throw new Error("Driver support not enabled")},isChild:m,canRenderTo:function(a){return bO(a,"zoid_allow_delegate_"+g).then(function(a){return a.data}).catch(function(){return!1})},registerChild:i}}(d),a=function(a){return b.init(a)};a.driver=function(a,c){return b.driver(a,c)},a.isChild=function(){return b.isChild()},a.canRenderTo=function(a){return b.canRenderTo(a)},a.instances=b.instances;var c=b.registerChild();return c&&(window.xprops=a.xprops=c.getProps()),a};function t(a){s&&s.destroyBridges();var b=cF.all(a);return cF=g(),b}var cI=t;function cJ(b){var a;return cI(),delete window.__zoid_9_0_87__,function(){for(var a=a9("responseListeners"),b=0,c=a.keys();b<c.length;b++){var d=c[b],e=a.get(d);e&&(e.cancelled=!0),a.del(d)}}(),(a=a9().get("postMessageListener"))&&a.cancel(),delete window.__post_robot_10_0_46__,cG.all(b)}}])});var frontEndpoint="www.ordertracker.com",apiEndpoint="api.ordertracker.com",ordertrackerProperties={id:{type:"string",required:!1},language:{type:"string",required:!1},size:{type:"string",required:!1},theme:{type:"string",required:!1},shape:{type:"string",required:!1},font:{type:"string",required:!1},trackingNumber:{type:"string",required:!1},buttonIcon:{type:"string",required:!1},buttonLabel:{type:"string",required:!1},buttonColor:{type:"string",required:!1},buttonLabelColor:{type:"string",required:!1},inputPlaceholder:{type:"string",required:!1},inputBorder:{type:"string",required:!1},showCouriersDetails:{type:"string",required:!1},showTrackingDetails:{type:"string",required:!1},showCustomClearanceDetails:{type:"string",required:!1},alwaysShowTodaysDate:{type:"string",required:!1},showDeliveryForecast:{type:"string",required:!1},showFailoverEvent:{type:"string",required:!1}},Ordertracker=zoid.create({tag:"ordertracker",url:"https://"+frontEndpoint+"/embed",dimensions:{width:"100%"},autoResize:{height:!0},props:ordertrackerProperties});if(window&&window.xprops){var c,d={},e=[],f={},g=function(b){var a;switch(b){case"DE":a={buttonLabel:"Mein Paket verfolgen",buttonLabelShort:"Verfolgen",inputPlaceholder:"Sendungsnummer..."};break;case"FR":a={buttonLabel:"Suivre mon colis",buttonLabelShort:"Suivre",inputPlaceholder:"Num\xe9ro de suivi..."};break;case"PT":a={buttonLabel:"Rastrear meu pacote",buttonLabelShort:"Rastrear",inputPlaceholder:"Numero de rastreio..."};break;case"IT":a={buttonLabel:"Traccia il mio pacco",buttonLabelShort:"Traccia",inputPlaceholder:"Numero di identificazione..."};break;case"ES":a={buttonLabel:"Rastrear mi paquete",buttonLabelShort:"Rastrear",inputPlaceholder:"N\xfamero de rastreo..."};break;case"TR":a={buttonLabel:"Paketimi takip et",buttonLabelShort:"Izlemek",inputPlaceholder:"Takip numaras\u0131..."};break;case"NL":a={buttonLabel:"Volg mijn pakket",buttonLabelShort:"Volg",inputPlaceholder:"Volg nummer..."};break;case"PL":a={buttonLabel:"\u015Aled\u017A moj\u0105 paczk\u0119",buttonLabelShort:"\u015Aled\u017A",inputPlaceholder:"Numer przesy\u0142ki..."};break;case"ZH_CN":a={buttonLabel:"\u8FFD\u8E2A\u6211\u7684\u5305\u88F9",buttonLabelShort:"\u8FFD\u8E2A",inputPlaceholder:"\u8FFD\u8E2A\u53F7\u7801..."};break;case"ZH_HK":a={buttonLabel:"\u8FFD\u8E2A\u6211\u7684\u5305\u88F9",buttonLabelShort:"\u8FFD\u8E2A",inputPlaceholder:"\u8FFD\u8E2A\u865F\u78BC..."};break;case"JA":a={buttonLabel:"\u79C1\u306E\u30D1\u30C3\u30B1\u30FC\u30B8\u3092\u8FFD\u8DE1\u3059\u308B",buttonLabelShort:"\u8FFD\u8DE1",inputPlaceholder:"\u8FFD\u8DE1\u756A\u53F7..."};break;case"KO":a={buttonLabel:"\uB0B4 \uD328\uD0A4\uC9C0 \uCD94\uC801",buttonLabelShort:"\uAE38",inputPlaceholder:"\uCD94\uC801 \uBC88\uD638..."};break;case"RU":a={buttonLabel:"\u041E\u0442\u0441\u043B\u0435\u0434\u0438\u0442\u044C \u043C\u043E\u044E \u043F\u043E\u0441\u044B\u043B\u043A\u0443",buttonLabelShort:"\u041E\u0442\u0441\u043B\u0435\u0434\u0438\u0442\u044C",inputPlaceholder:"\u041D\u043E\u043C\u0435\u0440 \u043E\u0442\u0441\u043B\u0435\u0436\u0438\u0432\u0430\u043D\u0438\u044F..."};break;default:a={buttonLabel:"Track my package",buttonLabelShort:"Track",inputPlaceholder:"Tracking number..."}}return a},h=function(){var a=d.language,b=["EN","DE","FR","PT","IT","ES","TR","NL","PL","ZH_CN","ZH_HK","JA","KO","RU"];if(a&&b.includes(a.split("-").join("_").toUpperCase()))a=a.split("-").join("_").toUpperCase();else{var a=navigator.language||navigator.userLanguage;(a=("string"==typeof a||a instanceof String)&&a.toUpperCase())&&(a="ZH-CN"===a||"ZH-HK"===a?a.split("-").join("_"):a.substring(0,2))}return b.includes(a)?a:"EN"},a=function(){try{domain=new URL(window.xprops.getParentDomain()).hostname}catch(a){domain=window.xprops.getParentDomain()}return domain},i=function(a){return a&&"string"==typeof a||a instanceof String&&a.split(" ").join("").length},j=function(a){return a&&a.match(/^[a-zA-Z0-9-_]+$/i)&&/\d/.test(a)&&a.length>4&&a.length<51&&/^[0-9a-zA-Z]/.test(a)&&/[0-9a-zA-Z]$/.test(a)},k=function(d){for(var c=d?new Date(d):new Date,a=[c.getDate(),c.getMonth()+1,c.getHours(),c.getMinutes()],b=0;b<a.length;b++)a[b]=a[b]<10?"0"+a[b]:a[b];return{day:a[0]+"/"+a[1]+"/"+c.getFullYear(),time:a[2]+":"+a[3]}},l=function(){var a=document.querySelectorAll(".fld > input"),b=function(){a.forEach(function(a){a.value?a.closest(".fld").classList.remove("focus"):a.closest(".fld").classList.remove("active","focus")})};a.forEach(function(a){a.addEventListener("focusin",function(a){b(),this.closest(".fld").classList.add("active","focus")}),a.addEventListener("focusout",function(a){b()})})},m=function(a){a=Array.isArray(a)?a:[a],document.querySelectorAll(".active").forEach(function(a){a.classList.remove("active")}),document.getElementById("widget-error").classList.add("active"),document.querySelector("#widget-error h1").innerHTML='<img alt="logo" src="/app/template/dashboard/img/logo.svg"><strong>'+a.join("<br><br>")+"</strong><span>info@ordertracker.com for more info</span>"},n=function(){return i(d.font)?d.font:"Roboto"},o=function(){return["search","link","chevron-right","long-arrow-right","check","check-circle","eye","sync","copy","globe","map-marker-alt"].includes(d.buttonIcon)?"fa-"+d.buttonIcon:"fa-map-marker-alt"},p=function(c,f){var e=(!d.language||"ORIGINAL"!==d.language.toUpperCase())&&h();b({method:"POST",url:"//"+apiEndpoint+"/public/widget-track",body:{id:window.xprops.id,number:c,lang:e,domain:a()}},function(a,b,c){f&&f(a,b,c)})},b=function(b,c){var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState){var b=a.response;if("string"==typeof b||b instanceof String)try{b=JSON.parse(b)}catch(d){}200==a.status?c(b,a.status,null):(b=b.error&&b.error.message?b.error.message:b,console.log(b),c(null,a.status,b))}},a.open(b.method,b.url,!0),a.setRequestHeader("Content-Type","application/json"),b.body?a.send(JSON.stringify(b.body)):a.send()},q=function(a){if(!a.ctn.classList.contains("loading-data")){var j=(!d.language||"ORIGINAL"!==d.language.toUpperCase())&&h(),l=a.button?a.button.innerHTML:null,e=document.querySelector("#widget #tracking-results"),b=document.querySelector("#widget .status-block"),n=document.querySelector("#widget .status-label"),o=document.querySelector("#widget .status-sublabel"),g=document.querySelector("#widget .status-progress"),q=document.querySelector("#widget [data-steps]");e.classList.remove("active"),b.classList.remove("delivered"),b.classList.remove("shipped"),b.classList.remove("unknown"),g.style.width="100%",a.ctn.classList.add("loading-data"),a.button&&(a.button.innerHTML=c),p(a.number,function(c,s,d){if(c){var h="";if(a.showFailoverEvent&&"unknown"===c.status&&(c.statusLabel=c.ecommerceUnknownLabel,c.statusSubLabel=c.ecommerceUnknownSubLabel,c.statusPlaceholder=c.ecommerceUnknownPlaceholder,c.unknownMeaning=c.ecommerceUnknownMeaning,c.unknownLine=c.ecommerceUnknownLine),b.classList.add(c.status),n.innerHTML=c.statusLabel,o.innerHTML=c.statusSubLabel,g.style.width=c.statusProgressPercentage+"%",c.steps&&c.steps.length){var t=1;c.couriers.forEach(function(a){a.slug||(a.slug="unknown-"+t,t=4===t?1:t+1)}),c.steps.forEach(function(b,o){c.couriers.forEach(function(a){b.courier.name===a.name&&(b.courier.slug=a.slug)}),a.showCustomClearanceDetails||"IN_CUSTOMS"!==b.semanticStatus||(b.meaning=f.statusPlaceholder[j]?f.statusPlaceholder[j]:f.statusPlaceholder.EN);var p='<span class="step-meaning">'+b.meaning+"</span>",e=[];b.lines.forEach(function(b){var c=!1;"noasian"===a.showTrackingDetails&&f.asianRegexes.asianRegexes.forEach(function(a){new RegExp(a,"i").test(b)&&(c=!0)}),c||e.push('<sub class="step-line">'+b+"</sub>")});var l=b.humanReadableTime,m=k(b.time).time;if(a.alwaysShowTodaysDate&&0===o&&"delivered"!==c.status){var g=new Date;g.setHours(0,0,0,0),l=k(g).day,m=k(g).time}var n=e.length>2?'<img class="extend-step-btn" src="/app/template/img/icons/expand.svg">':"",i=e.length>2?"extendable-step":"",d=[];("none"===a.showCouriersDetails||"noasian"===a.showCouriersDetails&&f.asianCouriers.includes(b.courier.name))&&(b.courier.slug="unknown-1",d.push("hide-courier")),("none"===a.showTrackingDetails||"noasian"===a.showTrackingDetails&&f.asianCouriers.includes(b.courier.name)|| !a.showCustomClearanceDetails&&"IN_CUSTOMS"===b.semanticStatus)&&(n="",i="",d.push("hide-details")),i.length&&d.push(i),h+='<li class="'+d.join(" ")+'"><div class="r load"><div><address><span class="courier-name"><span>'+b.courier.name+'</span></span><span class="courier-time">'+l+" "+m+"</span>"+p+e.join("")+n+'</address></div><div class="courier-img"><span><img src="/app/template/img/couriers/'+b.courier.slug+'.png" alt="'+b.courier.name+'"></span></div></div></li>'})}else{var p=k().day,r=k().time;h='<li><div class="r load"><div><address><span class="courier-name"><span>'+c.statusPlaceholder+'</span></span><span class="courier-time">'+p+" "+r+'</span><span class="step-meaning">'+c.unknownMeaning+'</span><sub class="step-line">'+c.unknownLine+'</sub></address></div><div class="courier-img"><span><img src="/app/template/img/couriers/unknown-2.png" alt="'+c.statusPlaceholder+'"></span></div></div></li>'}q.innerHTML=h,document.querySelectorAll(".extendable-step").forEach(function(a){a.addEventListener("click",function(b){a.classList.contains("active")?a.classList.remove("active"):a.classList.add("active")})}),e.classList.add("active")}else i(d)?m(d):m("An unknown error occurred, please reload the page. If the problem persists contact-us at: info@ordertracker.com");loading=!1,a.button&&(a.button.innerHTML=l),a.ctn.classList.remove("loading-data"),document.querySelector("#widget .loading-block").classList.add("inactive")})}},r=window.xprops.id?window.xprops.id:a();b({method:"GET",url:"/app/template/dashboard/img/loading.svg"},function(a,p,k){k||(c=a),b({method:"GET",url:"//"+apiEndpoint+"/public/widget-configuration?id="+r},function(k,p,a){i(a)?e.push(a):a&&!i(a)&&e.push("An unknown error occurred, please reload the page. If the problem persists contact-us at: info@ordertracker.com"),e.length?m(e):(k.ok?Object.keys(ordertrackerProperties).forEach(function(a){window.xprops[a]&&(d[a]=window.xprops[a])}):(d=k,window.xprops.trackingNumber&&(d.trackingNumber=window.xprops.trackingNumber)),l(),b({method:"GET",url:"//"+apiEndpoint+"/public/widget-constants"},function(p,G,H){f=p;var r=i(d.size)&&["large","medium","small"].includes(d.size.toLowerCase())?d.size.toLowerCase():"large",s=h(),k=g(s),t=i(d.theme)&&"dark"===d.theme.toLowerCase()?"dark":"light",u=i(d.shape)&&"geometric"===d.shape.toLowerCase()?"geometric":"rounded",l=i(d.buttonColor)&&/^#[0-9a-zA-Z]+$/.test(d.buttonColor)?d.buttonColor:null,e=i(d.buttonLabelColor)&&/^#[0-9a-zA-Z]+$/.test(d.buttonLabelColor)?d.buttonLabelColor:null,v=i(d.inputBorder)&&"thin"===d.inputBorder.toLowerCase()?"thin":"thick",w=!0===d.showDeliveryForecast||"true"===d.showDeliveryForecast?"show-estimation":"hide-estimation",x=!0===d.alwaysShowTodaysDate||"true"===d.alwaysShowTodaysDate,y=!1!==d.showFailoverEvent&&"false"!==d.showFailoverEvent,z=!1!==d.showCustomClearanceDetails&&"false"!==d.showCustomClearanceDetails,A=d.trackingNumber?"hide-form":"show-form",m=document.getElementById("widget"),b=document.createElement("link");b.setAttribute("rel","stylesheet"),b.setAttribute("type","text/css"),b.setAttribute("href","https://fonts.googleapis.com/css?family="+n().split(" ").join("+")),document.querySelector("head").appendChild(b),document.querySelector("html").style.fontFamily='"'+n()+'", "serif"',document.querySelector("body").style.fontFamily='"'+n()+'", "serif"';var B=document.querySelector("#widget form"),C=document.querySelector("#widget fieldset"),D=document.querySelector("#widget input"),E=document.querySelector("#widget label"),a=document.querySelector("#widget a"),F=d.buttonLabel||k.buttonLabelShort,I=function(){C.classList.add("wrong"),setTimeout(function(){C.classList.remove("wrong")},750)};d.trackingNumber&&q({ctn:m,number:d.trackingNumber,button:a,showCouriersDetails:d.showCouriersDetails,showTrackingDetails:d.showTrackingDetails,alwaysShowTodaysDate:x,showFailoverEvent:y,showCustomClearanceDetails:z}),B.addEventListener("submit",function(a){a.preventDefault()}),D.addEventListener("keyup",function(b){var c=D.value.trim().toUpperCase();C.classList.remove("wrong"),"13"==b.keyCode&&(b.preventDefault(),j(c)?q({ctn:m,number:c,button:a,showCouriersDetails:d.showCouriersDetails,showTrackingDetails:d.showTrackingDetails,alwaysShowTodaysDate:x,showFailoverEvent:y,showCustomClearanceDetails:z}):I())}),a.addEventListener("click",function(c){c.preventDefault(),C.classList.remove("wrong");var b=D.value.trim().toUpperCase();j(b)?q({ctn:m,number:b,button:a,showCouriersDetails:d.showCouriersDetails,showTrackingDetails:d.showTrackingDetails,alwaysShowTodaysDate:x,showFailoverEvent:y,showCustomClearanceDetails:z}):I()}),C.classList.add(v),E.innerHTML=d.inputPlaceholder||k.inputPlaceholder,a.innerHTML='<span class="btn-ctn"><i class="fal '+o()+'"></i><span>'+F+"</span></span>",l&&(a.style.background=l),e?(a.style.color=e,c=c.split("OT_VAR_1").join(e)):c=c.split("OT_VAR_1").join("#ffffff"),m.classList.add("active",r,t,u,w,A)}))})})}